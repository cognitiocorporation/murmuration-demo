{"ast":null,"code":"import _defineProperty from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/angelvazquez/Dropbox/My Mac (Angels-MacBook-Pro-4.local)/Documents/Projects/Murmuration - 10:04:2021/src/components/ecommerce/IdeaQuestions.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Badge, Card, CardHeader, CardBody, CardFooter, Container, Row, Col, FormSelect, ButtonGroup, Button, InputGroup, InputGroupAddon, InputGroupText, FormInput, Form } from \"shards-react\";\nimport Chart from \"../../utils/chart\";\nimport colors from \"../../utils/colors\";\nimport SingleProgressChart from \"../analytics/GoalsOverview/SingleProgressChart\";\nimport Parse from 'parse';\nimport { useTranslation, initReactI18next, withTranslation } from \"react-i18next\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar IdeaQuestions = /*#__PURE__*/function (_React$Component) {\n  _inherits(IdeaQuestions, _React$Component);\n\n  var _super = _createSuper(IdeaQuestions);\n\n  function IdeaQuestions(props) {\n    var _this;\n\n    _classCallCheck(this, IdeaQuestions);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      ideas: [],\n      filteredQuestions: [],\n      filter: 'Todas'\n    };\n    return _this;\n  }\n\n  _createClass(IdeaQuestions, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchNewData();\n    }\n  }, {\n    key: \"fetchNewData\",\n    value: function fetchNewData() {\n      var _this2 = this;\n\n      var filter = this.state.filter;\n      var className = \"IdeaQuestion\";\n      var ItemClass = Parse.Object.extend(className);\n      var query = new Parse.Query(ItemClass); // subscription.on('open', () => {\n      //   console.log('subscription opened');\n      //  });\n\n      var currentUser = Parse.User.current();\n      var userId = currentUser.get(\"username\");\n\n      if (filter == 'Todas') {\n        query = new Parse.Query(ItemClass);\n      } else {\n        query.equalTo(\"category\", filter);\n      }\n\n      query.find().then(function (results) {\n        _this2.setState({\n          ideas: results,\n          filteredQuestions: results\n        });\n      }, function (error) {\n        alert('Hubo un error en la busca. Favor de tratar luego.'); // The object was not retrieved successfully.\n        // error is a Parse.Error with an error code and message.\n      });\n    }\n  }, {\n    key: \"handleCategoryChange\",\n    value: function handleCategoryChange(event) {\n      var newCategory = event.target.value;\n      var _this$state = this.state,\n          ideas = _this$state.ideas,\n          filteredQuestions = _this$state.filteredQuestions;\n      console.log('FILTERED QUESTIONS');\n      console.log(ideas);\n      var filteredData;\n\n      if (newCategory !== 'Todas') {\n        filteredData = ideas.filter(function (item) {\n          return item.get(\"category\") === newCategory;\n        });\n      } else {\n        filteredData = ideas;\n      }\n\n      this.setState({\n        filter: newCategory,\n        filteredQuestions: filteredData\n      });\n    }\n  }, {\n    key: \"deleteItem\",\n    value: function deleteItem(item) {\n      var _this3 = this;\n\n      item.destroy({}).then(function (item) {\n        // Execute any logic that should take place after the object is saved.\n        _this3.fetchNewData();\n\n        alert('¡La operacion fue exitosa!');\n      }, function (error) {\n        // Execute any logic that should take place if the save fails.\n        // error is a Parse.Error with an error code and message.\n        alert('Hubo un error en la operacion: ' + error.message);\n      });\n    }\n  }, {\n    key: \"editItem\",\n    value: function editItem(item) {\n      var _this4 = this;\n\n      var newQuestion = prompt(\"Replace \\\"\" + item.get(\"question\") + \"\\\" with: \");\n\n      if (newQuestion != '') {\n        item.set(\"question\", newQuestion);\n        item.save().then(function (item) {\n          // Execute any logic that should take place after the object is saved.\n          _this4.fetchNewData();\n\n          alert('¡La operacion fue exitosa!');\n        }, function (error) {\n          // Execute any logic that should take place if the save fails.\n          // error is a Parse.Error with an error code and message.\n          alert('Hubo un error en la operacion: ' + error.message);\n        });\n      } else {\n        alert(\"Question cannot be left blank.\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this,\n          _jsxDEV2;\n\n      var _this$state2 = this.state,\n          ideas = _this$state2.ideas,\n          title = _this$state2.title,\n          filter = _this$state2.filter,\n          filteredQuestions = _this$state2.filteredQuestions;\n      var t = this.props.t;\n      return /*#__PURE__*/_jsxDEV(Card, {\n        className: \"lo-stats h-100\",\n        children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n          className: \"border-bottom\",\n          children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n            className: \"m-0\",\n            children: t('QUESTION_LIST')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"block-handle\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n          className: \"p-0\",\n          children: /*#__PURE__*/_jsxDEV(Container, {\n            fluid: true,\n            className: \"px-0\",\n            children: /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table mb-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                className: \"py-2 bg-light text-semibold border-bottom\",\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-center\",\n                    children: t(\"QUESTION\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-center\",\n                    children: t(\"CATEGORY\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-center\",\n                    children: t(\"STATUS\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 19\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"text-right\",\n                    children: t(\"ACTIONS\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 19\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 17\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 143,\n                columnNumber: 15\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: filteredQuestions.map(function (item, idx) {\n                  return /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"lo-stats__order-details text-center\",\n                      children: item.get(\"question\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 154,\n                      columnNumber: 21\n                    }, _this5), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"lo-stats__total text-center text-success\",\n                      children: item.get(\"category\")\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 157,\n                      columnNumber: 21\n                    }, _this5), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"lo-stats__items text-center\",\n                      children: item.get(\"required\") ? 'Requerida' : 'No Requerida'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 160,\n                      columnNumber: 21\n                    }, _this5), /*#__PURE__*/_jsxDEV(\"td\", {\n                      className: \"lo-stats__actions\",\n                      children: /*#__PURE__*/_jsxDEV(ButtonGroup, {\n                        className: \"d-table ml-auto\",\n                        children: /*#__PURE__*/_jsxDEV(Button, {\n                          size: \"sm\",\n                          theme: \"white\",\n                          onClick: function onClick(e) {\n                            return _this5.deleteItem(item);\n                          },\n                          children: \"Borrar\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 166,\n                          columnNumber: 25\n                        }, _this5)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 162,\n                        columnNumber: 23\n                      }, _this5)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 161,\n                      columnNumber: 21\n                    }, _this5)]\n                  }, idx, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 19\n                  }, _this5);\n                })\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 15\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(CardFooter, {\n          className: \"border-top\",\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            className: \"text-right view-report\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(FormSelect, (_jsxDEV2 = {\n                size: \"sm\",\n                value: \"filter\",\n                style: {\n                  maxWidth: \"130px\"\n                },\n                onChange: this.handleCategoryChange.bind(this)\n              }, _defineProperty(_jsxDEV2, \"value\", filter), _defineProperty(_jsxDEV2, \"children\", [/*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Todas\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Seguridad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Calidad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Productividad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                children: \"Accion Inmediata\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, this)]), _jsxDEV2), void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return IdeaQuestions;\n}(React.Component);\n/**\n * Returns the badge type for a specific\n */\n\n\nfunction getBadgeType(itemStatus) {\n  var statusMap = {\n    Complete: \"success\",\n    Saved: \"warning\",\n    Canceled: \"danger\"\n  };\n  return statusMap[itemStatus];\n}\n\nfunction getProgressChart(itemProgress) {\n  var progressString = itemProgress[0] + \"%\";\n  var progressChart = {\n    data: {\n      conversionRate: progressString,\n      datasets: [{\n        hoverBorderColor: \"#fff\",\n        data: itemProgress,\n        backgroundColor: [colors.primary.toRGBA(0.9), colors.athensGray.toRGBA(0.8)]\n      }],\n      labels: [\"Label 1\", \"Label 2\"]\n    }\n  };\n  return progressChart;\n}\n\nexport default withTranslation()(IdeaQuestions);","map":{"version":3,"sources":["/Users/angelvazquez/Dropbox/My Mac (Angels-MacBook-Pro-4.local)/Documents/Projects/Murmuration - 10:04:2021/src/components/ecommerce/IdeaQuestions.js"],"names":["React","PropTypes","Badge","Card","CardHeader","CardBody","CardFooter","Container","Row","Col","FormSelect","ButtonGroup","Button","InputGroup","InputGroupAddon","InputGroupText","FormInput","Form","Chart","colors","SingleProgressChart","Parse","useTranslation","initReactI18next","withTranslation","IdeaQuestions","props","state","ideas","filteredQuestions","filter","fetchNewData","className","ItemClass","Object","extend","query","Query","currentUser","User","current","userId","get","equalTo","find","then","results","setState","error","alert","event","newCategory","target","value","console","log","filteredData","item","destroy","message","newQuestion","prompt","set","save","title","t","map","idx","e","deleteItem","maxWidth","handleCategoryChange","bind","Component","getBadgeType","itemStatus","statusMap","Complete","Saved","Canceled","getProgressChart","itemProgress","progressString","progressChart","data","conversionRate","datasets","hoverBorderColor","backgroundColor","primary","toRGBA","athensGray","labels"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Badge,\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  Container,\n  Row,\n  Col,\n  FormSelect,\n  ButtonGroup,\n  Button,\n  InputGroup,\n  InputGroupAddon, \n  InputGroupText, \n  FormInput,\n  Form,\n} from \"shards-react\";\nimport Chart from \"../../utils/chart\";\nimport colors from \"../../utils/colors\";\nimport SingleProgressChart from \"../analytics/GoalsOverview/SingleProgressChart\";\nimport Parse from 'parse';\nimport { useTranslation, initReactI18next, withTranslation } from \"react-i18next\";\n\n\nclass IdeaQuestions extends React.Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      ideas:[],\n      filteredQuestions:[],\n      filter:'Todas'\n    }\n  }\n\n  componentDidMount() {\n    this.fetchNewData();\n  }\n\n  fetchNewData() {\n    const { filter } = this.state;\n    const className = \"IdeaQuestion\";\n\n    var ItemClass = Parse.Object.extend(className);\n    var query = new Parse.Query(ItemClass);\n\n    // subscription.on('open', () => {\n    //   console.log('subscription opened');\n    //  });\n\n    const currentUser = Parse.User.current();\n    const userId = currentUser.get(\"username\");\n\n\n    if (filter == 'Todas') {\n      query = new Parse.Query(ItemClass);\n    } else {\n      query.equalTo(\"category\", filter);\n    }\n\n    query.find()\n    .then((results) => {\n        this.setState({\n            ideas: results,\n            filteredQuestions: results\n        });\n    }, (error) => {\n      alert('Hubo un error en la busca. Favor de tratar luego.');\n      // The object was not retrieved successfully.\n      // error is a Parse.Error with an error code and message.\n    });\n  }\n\n  handleCategoryChange(event) {\n    const newCategory = event.target.value;\n    const { ideas, filteredQuestions } = this.state;\n    console.log('FILTERED QUESTIONS');\n    console.log(ideas);\n    \n    var filteredData;\n    if (newCategory !== 'Todas') {\n      filteredData = ideas.filter(item => item.get(\"category\") === newCategory);\n    }  else {\n      filteredData = ideas;\n    }\n    \n    this.setState({\n      filter: newCategory,\n      filteredQuestions: filteredData\n    });\n  }\n\n  deleteItem(item) {\n    item.destroy({})\n    .then((item) => {\n    // Execute any logic that should take place after the object is saved.\n      this.fetchNewData();\n      alert('¡La operacion fue exitosa!');\n    }, (error) => {\n      // Execute any logic that should take place if the save fails.\n      // error is a Parse.Error with an error code and message.\n      alert('Hubo un error en la operacion: ' + error.message);\n    });\n  }\n\n  editItem(item) {\n    var newQuestion = prompt(\"Replace \\\"\" + item.get(\"question\") +\"\\\" with: \");\n    if (newQuestion != '') {\n      item.set(\"question\", newQuestion)\n      item.save()\n      .then((item) => {\n      // Execute any logic that should take place after the object is saved.\n        this.fetchNewData();\n        alert('¡La operacion fue exitosa!');\n      }, (error) => {\n        // Execute any logic that should take place if the save fails.\n        // error is a Parse.Error with an error code and message.\n        alert('Hubo un error en la operacion: ' + error.message);\n      });\n    } else {\n      alert(\"Question cannot be left blank.\")\n    }\n  }\n\n  render() {\n    const {ideas, title, filter, filteredQuestions} = this.state;\n    const { t } = this.props;\n\n    return(\n      <Card className=\"lo-stats h-100\">\n        <CardHeader className=\"border-bottom\">\n          <h6 className=\"m-0\">{t('QUESTION_LIST')}</h6>\n          <div className=\"block-handle\" />\n          {/* INSERT SEARCH HERE */}\n        </CardHeader>\n\n        <CardBody className=\"p-0\">\n          <Container fluid className=\"px-0\">\n            <table className=\"table mb-0\">\n              <thead className=\"py-2 bg-light text-semibold border-bottom\">\n                <tr>\n                  <th className=\"text-center\">{t(\"QUESTION\")}</th>\n                  <th className=\"text-center\">{t(\"CATEGORY\")}</th>\n                  <th className=\"text-center\">{t(\"STATUS\")}</th>\n                  <th className=\"text-right\">{t(\"ACTIONS\")}</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredQuestions.map((item, idx) => (\n                  <tr key={idx}>\n                    <td className=\"lo-stats__order-details text-center\">\n                      {item.get(\"question\")}\n                    </td>\n                    <td className=\"lo-stats__total text-center text-success\">\n                      {item.get(\"category\")}\n                    </td>\n                    <td className=\"lo-stats__items text-center\">{item.get(\"required\") ? 'Requerida':'No Requerida'}</td>\n                    <td className=\"lo-stats__actions\">\n                      <ButtonGroup className=\"d-table ml-auto\">\n                        {/* <Button size=\"sm\" theme=\"white\" onClick={e => this.editItem(item)}>\n                          Editar\n                        </Button> */}\n                        <Button size=\"sm\" theme=\"white\" onClick={e => this.deleteItem(item)}>\n                          Borrar\n                        </Button>\n                      </ButtonGroup>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </Container>\n        </CardBody>\n\n        <CardFooter className=\"border-top\">\n          {/* View Full Report */}\n          <Col className=\"text-right view-report\">\n            \n          </Col>\n          <Row>\n            {/* Time Span */}\n            <Col>\n              <FormSelect\n                size=\"sm\"\n                value=\"filter\"\n                style={{ maxWidth: \"130px\" }}\n                onChange={this.handleCategoryChange.bind(this)} value={filter}\n              >\n                <option>Todas</option>\n                <option>Seguridad</option>\n                <option>Calidad</option>\n                <option>Productividad</option>\n                <option>Accion Inmediata</option>\n              </FormSelect>\n            </Col>\n          </Row>\n        </CardFooter>\n      </Card>\n    )\n  }\n}\n\n/**\n * Returns the badge type for a specific\n */\nfunction getBadgeType(itemStatus) {\n  const statusMap = {\n    Complete: \"success\",\n    Saved: \"warning\",\n    Canceled: \"danger\"\n  };\n\n  return statusMap[itemStatus];\n}\n\nfunction getProgressChart(itemProgress) {\n  const progressString = itemProgress[0] + \"%\";\n  const progressChart = {\n    data: {\n      conversionRate: progressString,\n      datasets: [\n        {\n          hoverBorderColor: \"#fff\",\n          data: itemProgress,\n          backgroundColor: [\n            colors.primary.toRGBA(0.9),\n            colors.athensGray.toRGBA(0.8)\n          ]\n        }\n      ],\n      labels: [\"Label 1\", \"Label 2\"]\n    }\n  };\n\n  return progressChart;\n}\n\n\nexport default withTranslation()(IdeaQuestions);\n"]},"metadata":{},"sourceType":"module"}