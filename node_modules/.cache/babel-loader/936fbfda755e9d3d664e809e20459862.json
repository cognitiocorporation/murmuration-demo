{"ast":null,"code":"function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\n/*\nCSV Generate - main module\n\nPlease look at the [project documentation](https://csv.js.org/generate/) for\nadditional information.\n*/\nvar stream = require('stream');\n\nvar util = require('util');\n\nmodule.exports = function () {\n  var options;\n  var callback;\n\n  if (arguments.length === 2) {\n    options = arguments[0];\n    callback = arguments[1];\n  } else if (arguments.length === 1) {\n    if (typeof arguments[0] === 'function') {\n      options = {};\n      callback = arguments[0];\n    } else {\n      options = arguments[0];\n    }\n  } else if (arguments.length === 0) {\n    options = {};\n  }\n\n  var generator = new Generator(options);\n\n  if (callback) {\n    var data = [];\n    generator.on('readable', function () {\n      var d;\n\n      while (d = generator.read()) {\n        data.push(d);\n      }\n    });\n    generator.on('error', callback);\n    generator.on('end', function () {\n      if (generator.options.objectMode) {\n        callback(null, data);\n      } else {\n        if (generator.options.encoding) {\n          callback(null, data.join(''));\n        } else {\n          callback(null, Buffer.concat(data));\n        }\n      }\n    });\n  }\n\n  return generator;\n};\n\nGenerator = function (_Generator) {\n  function Generator() {\n    return _Generator.apply(this, arguments);\n  }\n\n  Generator.toString = function () {\n    return _Generator.toString();\n  };\n\n  return Generator;\n}(function () {\n  var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n  // Convert Stream Readable options if underscored\n  if (options.high_water_mark) {\n    options.highWaterMark = options.high_water_mark;\n  }\n\n  if (options.object_mode) {\n    options.objectMode = options.object_mode;\n  } // Call parent constructor\n\n\n  stream.Readable.call(this, options); // Clone and camelize options\n\n  this.options = {};\n\n  for (var k in options) {\n    this.options[Generator.camelize(k)] = options[k];\n  } // Normalize options\n\n\n  var dft = {\n    columns: 8,\n    delimiter: ',',\n    duration: null,\n    encoding: null,\n    end: null,\n    eof: false,\n    fixedSize: false,\n    length: -1,\n    maxWordLength: 16,\n    rowDelimiter: '\\n',\n    seed: false,\n    sleep: 0\n  };\n\n  for (var _k in dft) {\n    if (this.options[_k] === undefined) {\n      this.options[_k] = dft[_k];\n    }\n  } // Default values\n\n\n  if (this.options.eof === true) {\n    this.options.eof = this.options.rowDelimiter;\n  } // State\n\n\n  this._ = {\n    start_time: this.options.duration ? Date.now() : null,\n    fixed_size_buffer: '',\n    count_written: 0,\n    count_created: 0\n  };\n\n  if (typeof this.options.columns === 'number') {\n    this.options.columns = new Array(this.options.columns);\n  }\n\n  var accepted_header_types = Object.keys(Generator).filter(function (t) {\n    return !['super_', 'camelize'].includes(t);\n  });\n\n  for (var i = 0; i < this.options.columns.length; i++) {\n    var v = this.options.columns[i] || 'ascii';\n\n    if (typeof v === 'string') {\n      if (!accepted_header_types.includes(v)) {\n        throw Error(\"Invalid column type: got \\\"\".concat(v, \"\\\", default values are \").concat(JSON.stringify(accepted_header_types)));\n      }\n\n      this.options.columns[i] = Generator[v];\n    }\n  }\n\n  return this;\n});\n\nutil.inherits(Generator, stream.Readable); // Export the class\n\nmodule.exports.Generator = Generator; // Generate a random number between 0 and 1 with 2 decimals. The function is idempotent if it detect the \"seed\" option.\n\nGenerator.prototype.random = function () {\n  if (this.options.seed) {\n    return this.options.seed = this.options.seed * Math.PI * 100 % 100 / 100;\n  } else {\n    return Math.random();\n  }\n}; // Stop the generation.\n\n\nGenerator.prototype.end = function () {\n  this.push(null);\n}; // Put new data into the read queue.\n\n\nGenerator.prototype._read = function (size) {\n  var _this = this;\n\n  // Already started\n  var data = [];\n  var length = this._.fixed_size_buffer.length;\n\n  if (length !== 0) {\n    data.push(this._.fixed_size_buffer);\n  }\n\n  var _loop = function _loop() {\n    // Time for some rest: flush first and stop later\n    if (_this._.count_created === _this.options.length || _this.options.end && Date.now() > _this.options.end || _this.options.duration && Date.now() > _this._.start_time + _this.options.duration) {\n      // Flush\n      if (data.length) {\n        if (_this.options.objectMode) {\n          var _iterator = _createForOfIteratorHelper(data),\n              _step;\n\n          try {\n            for (_iterator.s(); !(_step = _iterator.n()).done;) {\n              var _line = _step.value;\n\n              _this.__push(_line);\n            }\n          } catch (err) {\n            _iterator.e(err);\n          } finally {\n            _iterator.f();\n          }\n        } else {\n          _this.__push(data.join('') + (_this.options.eof ? _this.options.eof : ''));\n        }\n      } // Stop\n\n\n      return {\n        v: _this.push(null)\n      };\n    } // Create the line\n\n\n    var line = [];\n    var lineLength = void 0;\n\n    _this.options.columns.forEach(function (fn) {\n      line.push(fn(_this));\n    }); // for(const header in this.options.columns){\n    //   // Create the field\n    //   line.push(header(this))\n    // }\n    // Obtain line length\n\n\n    if (_this.options.objectMode) {\n      lineLength = 0;\n\n      var _iterator2 = _createForOfIteratorHelper(line),\n          _step2;\n\n      try {\n        for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n          var column = _step2.value;\n          lineLength += column.length;\n        }\n      } catch (err) {\n        _iterator2.e(err);\n      } finally {\n        _iterator2.f();\n      }\n    } else {\n      // Stringify the line\n      line = (_this._.count_created === 0 ? '' : _this.options.rowDelimiter) + line.join(_this.options.delimiter);\n      lineLength = line.length;\n    }\n\n    _this._.count_created++;\n\n    if (length + lineLength > size) {\n      if (_this.options.objectMode) {\n        data.push(line);\n\n        var _iterator3 = _createForOfIteratorHelper(data),\n            _step3;\n\n        try {\n          for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n            var _line2 = _step3.value;\n\n            _this.__push(_line2);\n          }\n        } catch (err) {\n          _iterator3.e(err);\n        } finally {\n          _iterator3.f();\n        }\n      } else {\n        if (_this.options.fixedSize) {\n          _this._.fixed_size_buffer = line.substr(size - length);\n          data.push(line.substr(0, size - length));\n        } else {\n          data.push(line);\n        }\n\n        _this.__push(data.join(''));\n      }\n\n      return {\n        v: void 0\n      };\n    }\n\n    length += lineLength;\n    data.push(line);\n  };\n\n  while (true) {\n    var _ret = _loop();\n\n    if (typeof _ret === \"object\") return _ret.v;\n  }\n}; // Put new data into the read queue.\n\n\nGenerator.prototype.__push = function (record) {\n  var _this2 = this;\n\n  this._.count_written++;\n\n  if (this.options.sleep > 0) {\n    setTimeout(function () {\n      _this2.push(record);\n    }, this.options.sleep);\n  } else {\n    this.push(record);\n  }\n}; // Generate an ASCII value.\n\n\nGenerator.ascii = function (gen) {\n  // Column\n  var column = [];\n  var nb_chars = Math.ceil(gen.random() * gen.options.maxWordLength);\n\n  for (var i = 0; i < nb_chars; i++) {\n    var char = Math.floor(gen.random() * 32);\n    column.push(String.fromCharCode(char + (char < 16 ? 65 : 97 - 16)));\n  }\n\n  return column.join('');\n}; // Generate an integer value.\n\n\nGenerator.int = function (gen) {\n  return Math.floor(gen.random() * Math.pow(2, 52));\n}; // Generate an boolean value.\n\n\nGenerator.bool = function (gen) {\n  return Math.floor(gen.random() * 2);\n}; // Camelize option properties\n\n\nGenerator.camelize = function (str) {\n  return str.replace(/_([a-z])/gi, function (_, match, index) {\n    return match.toUpperCase();\n  });\n};","map":null,"metadata":{},"sourceType":"script"}