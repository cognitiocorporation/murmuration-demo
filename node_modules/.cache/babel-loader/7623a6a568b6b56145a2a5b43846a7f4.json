{"ast":null,"code":"import _regeneratorRuntime from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/angelvazquez/Dropbox/My Mac (Angels-MacBook-Pro-4.local)/Documents/Projects/Murmuration - 10:04:2021/src/components/layout/MainNavbar/NavbarNav/Languages.js\";\nimport React from \"react\";\nimport { withRouter } from 'react-router';\nimport { NavItem, NavLink, Badge, Collapse, DropdownItem } from \"shards-react\";\nimport Parse from 'parse';\nimport i18next from 'i18next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar currUser;\n\nvar Languages = /*#__PURE__*/function (_React$Component) {\n  _inherits(Languages, _React$Component);\n\n  var _super = _createSuper(Languages);\n\n  function Languages(props) {\n    var _this;\n\n    _classCallCheck(this, Languages);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      visible: false,\n      notificationCount: 0,\n      notificationMessages: []\n    };\n    _this.toggleNotifications = _this.toggleNotifications.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Languages, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      currUser = Parse.User.current();\n      this.getNotifications(currUser);\n    }\n  }, {\n    key: \"getNotifications\",\n    value: function () {\n      var _getNotifications = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(user) {\n        var query, results, count, messages;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = new Parse.Query(Parse.User);\n                query.equalTo(\"objectId\", user.id);\n                _context.next = 4;\n                return query.find();\n\n              case 4:\n                results = _context.sent;\n                count = results[0].get('notificationCount');\n                messages = results[0].get(\"notificationMessages\");\n                this.setState({\n                  notificationCount: count,\n                  notificationMessages: messages\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getNotifications(_x) {\n        return _getNotifications.apply(this, arguments);\n      }\n\n      return getNotifications;\n    }()\n  }, {\n    key: \"resetCount\",\n    value: function () {\n      var _resetCount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(user) {\n        var _this2 = this;\n\n        var query, results, currUser;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                query = new Parse.Query(Parse.User);\n                query.equalTo(\"objectId\", user.id);\n                _context2.next = 4;\n                return query.find();\n\n              case 4:\n                results = _context2.sent;\n                currUser = results[0];\n                currUser.set(\"notificationCount\", 0);\n                currUser.set(\"notificationMessages\", []);\n                _context2.next = 10;\n                return currUser.save().catch(function (error) {// This will error, since the Parse.User is not authenticated\n                }).then(function () {\n                  return _this2.setState({\n                    notificationCount: ''\n                  });\n                });\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function resetCount(_x2) {\n        return _resetCount.apply(this, arguments);\n      }\n\n      return resetCount;\n    }()\n  }, {\n    key: \"toggleNotifications\",\n    value: function toggleNotifications() {\n      if (this.state.visible) {\n        this.removeMessages();\n      }\n\n      this.setState({\n        visible: !this.state.visible\n      });\n      this.resetCount(currUser);\n    }\n  }, {\n    key: \"removeMessages\",\n    value: function removeMessages() {\n      this.setState({\n        notificationMessages: []\n      });\n    }\n  }, {\n    key: \"changeLanguage\",\n    value: function changeLanguage() {\n      console.log('CHANGING LANGUAGE');\n      console.log(i18next.language); // window.confirm(\"Warning! The page will be reloaded and you will lose any unsaved data.\")\n      // window.confirm('Are you sure you wish to delete this item?') ? this.onConfirm(\"english\") : ''\n\n      if (window.confirm('Warning! The page will be reloaded and you will lose any unsaved data.')) this.onConfirm('english'); // localStorage.setItem('language', 'en')\n      // window.location.reload();\n      // console.log(i18next.language)\n    }\n  }, {\n    key: \"onConfirm\",\n    value: function onConfirm(lang) {\n      if (lang == 'english') {\n        localStorage.setItem('language', 'en');\n        window.location.reload();\n      } else {\n        localStorage.setItem('language', 'es');\n        window.location.reload();\n      }\n    }\n  }, {\n    key: \"checkLanguageSpanish\",\n    value: function checkLanguageSpanish() {\n      console.log('CHECKING LANGUAGE');\n      console.log(i18next.language);\n      if (window.confirm('Warning! The page will be reloaded and you will lose any unsaved data.')) this.onConfirm('spanish'); // localStorage.setItem('language', 'es')\n      // window.location.reload();\n\n      console.log(i18next.language); // console.log(i18next.language)\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          notificationCount = _this$state.notificationCount,\n          notificationMessages = _this$state.notificationMessages;\n      return /*#__PURE__*/_jsxDEV(NavItem, {\n        className: \"border-right dropdown notifications\",\n        children: [/*#__PURE__*/_jsxDEV(NavLink, {\n          className: \"nav-link-icon text-center\",\n          onClick: this.toggleNotifications,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"nav-link-icon__wrapper\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"material-icons\",\n              children: \"emoji_flags\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n          open: this.state.visible,\n          className: \"dropdown-menu dropdown-menu-small\",\n          children: [/*#__PURE__*/_jsxDEV(DropdownItem, {\n            onClick: function onClick() {\n              return _this3.changeLanguage();\n            },\n            className: \"notification__all text-center\",\n            children: \"English \\uD83C\\uDDFA\\uD83C\\uDDF8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DropdownItem, {\n            onClick: function onClick() {\n              return _this3.checkLanguageSpanish();\n            },\n            className: \"notification__all text-center\",\n            children: \"Espa\\xF1ol \\uD83C\\uDDEA\\uD83C\\uDDF8\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return Languages;\n}(React.Component);\n\nexport default _c = withRouter(Languages);\n\nvar _c;\n\n$RefreshReg$(_c, \"%default%\");","map":{"version":3,"sources":["/Users/angelvazquez/Dropbox/My Mac (Angels-MacBook-Pro-4.local)/Documents/Projects/Murmuration - 10:04:2021/src/components/layout/MainNavbar/NavbarNav/Languages.js"],"names":["React","withRouter","NavItem","NavLink","Badge","Collapse","DropdownItem","Parse","i18next","currUser","Languages","props","state","visible","notificationCount","notificationMessages","toggleNotifications","bind","User","current","getNotifications","user","query","Query","equalTo","id","find","results","count","get","messages","setState","set","save","catch","error","then","removeMessages","resetCount","console","log","language","window","confirm","onConfirm","lang","localStorage","setItem","location","reload","changeLanguage","checkLanguageSpanish","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport {withRouter} from 'react-router';\nimport { NavItem, NavLink, Badge, Collapse, DropdownItem } from \"shards-react\";\nimport Parse from 'parse';\nimport i18next from 'i18next';\n\nvar currUser;\n\nclass Languages extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      visible: false,\n      notificationCount: 0,\n      notificationMessages: []\n    };\n\n    this.toggleNotifications = this.toggleNotifications.bind(this);\n  }\n\n  componentWillMount() {\n    currUser = Parse.User.current();\n    this.getNotifications(currUser);\n  }\n\n  async getNotifications(user) {\n    var query = new Parse.Query(Parse.User);\n    query.equalTo(\"objectId\", user.id);\n    const results = await query.find();\n    const count = results[0].get('notificationCount');\n    const messages = results[0].get(\"notificationMessages\");\n    this.setState({\n      notificationCount: count,\n      notificationMessages: messages\n    });\n  }\n\n  async resetCount(user) {\n    var query = new Parse.Query(Parse.User);\n    query.equalTo(\"objectId\", user.id);\n    const results = await query.find();\n    const currUser = results[0];\n\n    currUser.set(\"notificationCount\", 0);\n    currUser.set(\"notificationMessages\", []);\n    await currUser.save().catch(error => {\n      // This will error, since the Parse.User is not authenticated\n    }).then(() => \n      this.setState({\n        notificationCount: '',\n      })\n    );\n  }\n\n  toggleNotifications() {\n    if (this.state.visible) {\n      this.removeMessages();\n    }\n    this.setState({\n      visible: !this.state.visible,\n    });\n    this.resetCount(currUser);\n  }\n\n  removeMessages() {\n    this.setState({\n      notificationMessages: [],\n    })\n  }\n\n  changeLanguage() {\n    console.log('CHANGING LANGUAGE')\n    console.log(i18next.language)\n    // window.confirm(\"Warning! The page will be reloaded and you will lose any unsaved data.\")\n    // window.confirm('Are you sure you wish to delete this item?') ? this.onConfirm(\"english\") : ''\n    if (window.confirm('Warning! The page will be reloaded and you will lose any unsaved data.')) this.onConfirm('english')\n    // localStorage.setItem('language', 'en')\n    // window.location.reload();\n    // console.log(i18next.language)\n  }\n\n  onConfirm(lang){\n    if (lang == 'english') {\n      localStorage.setItem('language', 'en')\n      window.location.reload();\n    } else {\n       localStorage.setItem('language', 'es')\n       window.location.reload();\n    }\n  }\n\n  checkLanguageSpanish() {\n    console.log('CHECKING LANGUAGE')\n    console.log(i18next.language)\n    if (window.confirm('Warning! The page will be reloaded and you will lose any unsaved data.')) this.onConfirm('spanish')\n    // localStorage.setItem('language', 'es')\n    // window.location.reload();\n    console.log(i18next.language)\n    // console.log(i18next.language)\n  }\n\n  render() {\n    const {notificationCount, notificationMessages} = this.state;\n    return (\n      <NavItem className=\"border-right dropdown notifications\">\n        <NavLink\n          className=\"nav-link-icon text-center\"\n          onClick={this.toggleNotifications}\n        >\n          <div className=\"nav-link-icon__wrapper\">\n            <i className=\"material-icons\">emoji_flags</i>\n          </div>\n        </NavLink>\n        <Collapse\n          open={this.state.visible}\n          className=\"dropdown-menu dropdown-menu-small\"\n        >\n          \n          \n            <DropdownItem onClick={() => this.changeLanguage()} className=\"notification__all text-center\">\n                English ðŸ‡ºðŸ‡¸\n            </DropdownItem>\n            <DropdownItem onClick={() => this.checkLanguageSpanish()} className=\"notification__all text-center\">\n                EspaÃ±ol ðŸ‡ªðŸ‡¸\n            </DropdownItem> \n\n          {/* <DropdownItem className=\"notification__all text-center\">\n            No new notifications.\n          </DropdownItem> */}\n        </Collapse>\n      </NavItem>\n    );\n  }\n}\n\nexport default withRouter(Languages);"]},"metadata":{},"sourceType":"module"}