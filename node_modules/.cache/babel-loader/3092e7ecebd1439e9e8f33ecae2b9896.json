{"ast":null,"code":"import _regeneratorRuntime from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/angelvazquez/Desktop/murmuration-demo/src/components/layout/MainNavbar/NavbarNav/UserActions.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport { withRouter } from 'react-router';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem, Collapse, NavItem, NavLink } from \"shards-react\";\nimport Parse from 'parse';\nimport { withTranslation } from 'react-i18next';\nimport PDF from '../../../../assets/HelpToolkit.pdf';\n\nvar UserActions = /*#__PURE__*/function (_React$Component) {\n  _inherits(UserActions, _React$Component);\n\n  function UserActions(props) {\n    var _this;\n\n    _classCallCheck(this, UserActions);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserActions).call(this, props));\n    _this.state = {\n      visible: false,\n      userName: '',\n      email: ''\n    };\n    _this.toggleUserActions = _this.toggleUserActions.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.logOut = _this.logOut.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(UserActions, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var currUser = Parse.User.current();\n      this.getUserName(currUser);\n    }\n  }, {\n    key: \"getUserName\",\n    value: function () {\n      var _getUserName = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(user) {\n        var query, results, firstName, lastName, fullName, email;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = new Parse.Query(Parse.User);\n                query.equalTo(\"objectId\", user.id);\n                _context.next = 4;\n                return query.find();\n\n              case 4:\n                results = _context.sent;\n                firstName = results[0].get('firstName');\n                lastName = results[0].get('lastName');\n                fullName = firstName + ' ' + lastName;\n                email = results[0].get(\"username\");\n                console.log(email);\n                this.setState({\n                  userName: fullName,\n                  email: email\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getUserName(_x) {\n        return _getUserName.apply(this, arguments);\n      }\n\n      return getUserName;\n    }()\n  }, {\n    key: \"toggleUserActions\",\n    value: function toggleUserActions() {\n      this.setState({\n        visible: !this.state.visible\n      });\n    }\n  }, {\n    key: \"logOut\",\n    value: function logOut() {\n      var _this2 = this;\n\n      // console.log('Logout');\n      Parse.User.logOut().then(function () {\n        var currentUser = Parse.User.current(); // this will now be null\n        // console.log(currentUser);\n\n        _this2.props.history.push(\"/login\");\n      });\n    }\n  }, {\n    key: \"help\",\n    value: function help() {\n      // Open PDF\n      window.open(PDF);\n    }\n  }, {\n    key: \"resetPassword\",\n    value: function resetPassword() {\n      var user = Parse.User.current();\n      user.fetch().then(function (fetchedUser) {\n        var email = fetchedUser.getUsername();\n        var newPassword = prompt('Enter your new password:');\n        fetchedUser.set(\"password\", newPassword);\n        fetchedUser.save().then(function () {\n          alert('Success.');\n        });\n      }, function (error) {\n        //Handle the error\n        console.log('Error getting email.');\n      }); // console.log(email)\n      // Parse.User.requestPasswordReset(email).then((succ, error) => {\n      //   if (error) {\n      //     console.log('Error...')\n      //   } else {\n      //     console.log('Success!')\n      //   }\n      // })\n      // console.log('Logout');\n      // Parse.User.logOut().then(() => {\n      //   var currentUser = Parse.User.current();  // this will now be null\n      //   // console.log(currentUser);\n      //   this.props.history.push(\"/login\");\n      // });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var userName = this.state.userName;\n      var t = this.props.t;\n      return /*#__PURE__*/React.createElement(NavItem, {\n        tag: Dropdown,\n        caret: true,\n        toggle: this.toggleUserActions,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(DropdownToggle, {\n        caret: true,\n        tag: NavLink,\n        className: \"text-nowrap px-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"user-avatar rounded-circle mr-2\",\n        src: require(\"./../../../../images/avatars/user.png\").default,\n        alt: \"User Avatar\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n        className: \"d-none d-md-inline-block\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 11\n        }\n      }, userName)), /*#__PURE__*/React.createElement(Collapse, {\n        tag: DropdownMenu,\n        right: true,\n        small: true,\n        open: this.state.visible,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(DropdownItem, {\n        className: \"text-success\",\n        onClick: this.resetPassword,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"material-icons text-success\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }, \"redo\"), \" \", t('RESET_PASSWORD')), /*#__PURE__*/React.createElement(DropdownItem, {\n        className: \"text-warning\",\n        onClick: function onClick() {\n          return _this3.help();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"material-icons text-warning\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 13\n        }\n      }, \"help\"), \" \", t('HELP')), /*#__PURE__*/React.createElement(DropdownItem, {\n        className: \"text-danger\",\n        onClick: this.logOut,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"material-icons text-danger\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }\n      }, \"\\uE879\"), \" \", t('LOGOUT'))));\n    }\n  }]);\n\n  return UserActions;\n}(React.Component);\n\nexport default withTranslation()(withRouter(UserActions));","map":{"version":3,"sources":["/Users/angelvazquez/Desktop/murmuration-demo/src/components/layout/MainNavbar/NavbarNav/UserActions.js"],"names":["React","Link","BrowserRouter","Route","withRouter","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","Collapse","NavItem","NavLink","Parse","withTranslation","PDF","UserActions","props","state","visible","userName","email","toggleUserActions","bind","logOut","currUser","User","current","getUserName","user","query","Query","equalTo","id","find","results","firstName","get","lastName","fullName","console","log","setState","then","currentUser","history","push","window","open","fetch","fetchedUser","getUsername","newPassword","prompt","set","save","alert","error","t","require","default","resetPassword","help","Component"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport { withRouter } from 'react-router'\nimport {\n  Dropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  Collapse,\n  NavItem,\n  NavLink\n} from \"shards-react\";\nimport Parse from 'parse';\nimport { withTranslation } from 'react-i18next';\nimport PDF from '../../../../assets/HelpToolkit.pdf';\n\n\nclass UserActions extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      visible: false,\n      userName: '', \n      email: ''\n    };\n\n    this.toggleUserActions = this.toggleUserActions.bind(this);\n    this.logOut = this.logOut.bind(this);\n  }\n\n  componentWillMount() {\n    let currUser = Parse.User.current();\n    this.getUserName(currUser);\n  }\n\n  async getUserName(user) {\n    var query = new Parse.Query(Parse.User);\n    query.equalTo(\"objectId\", user.id);\n    const results = await query.find();\n    const firstName = results[0].get('firstName');\n    const lastName = results[0].get('lastName');\n    const fullName = firstName + ' ' + lastName;\n    const email = results[0].get(\"username\")\n    console.log(email)\n    this.setState({\n      userName: fullName, \n      email: email\n    });\n  }\n\n  toggleUserActions() {\n    this.setState({\n      visible: !this.state.visible\n    });\n  }\n\n  logOut() {\n    // console.log('Logout');\n    Parse.User.logOut().then(() => {\n      var currentUser = Parse.User.current();  // this will now be null\n      // console.log(currentUser);\n      this.props.history.push(\"/login\");\n    });\n  }\n\n  help() {\n    // Open PDF\n    window.open(PDF);\n  }\n\n  resetPassword() {\n    var user = Parse.User.current();\n    user.fetch().then((fetchedUser) => {\n      var email = fetchedUser.getUsername();\n      const newPassword = prompt('Enter your new password:')\n      fetchedUser.set(\"password\", newPassword)\n      fetchedUser.save().then(() => {\n        alert('Success.')\n      });\n    }, function(error){\n        //Handle the error\n        console.log('Error getting email.')\n    });\n    // console.log(email)\n    // Parse.User.requestPasswordReset(email).then((succ, error) => {\n    //   if (error) {\n    //     console.log('Error...')\n    //   } else {\n    //     console.log('Success!')\n    //   }\n    // })\n    // console.log('Logout');\n    // Parse.User.logOut().then(() => {\n    //   var currentUser = Parse.User.current();  // this will now be null\n    //   // console.log(currentUser);\n    //   this.props.history.push(\"/login\");\n    // });\n  }\n\n  render() {\n    const { userName } = this.state;\n    const { t } = this.props;\n    return (\n      <NavItem tag={Dropdown} caret toggle={this.toggleUserActions}>\n        <DropdownToggle caret tag={NavLink} className=\"text-nowrap px-3\">\n          <img\n            className=\"user-avatar rounded-circle mr-2\"\n            src={require(\"./../../../../images/avatars/user.png\").default}\n            alt=\"User Avatar\"\n          />{\" \"}\n          <span className=\"d-none d-md-inline-block\">{userName}</span>\n        </DropdownToggle>\n        <Collapse tag={DropdownMenu} right small open={this.state.visible}>\n          <DropdownItem className=\"text-success\" onClick={this.resetPassword}>\n            <i className=\"material-icons text-success\">redo</i> {t('RESET_PASSWORD')}\n          </DropdownItem>\n          <DropdownItem className=\"text-warning\" onClick={() => this.help()}>\n            <i className=\"material-icons text-warning\">help</i> {t('HELP')}\n          </DropdownItem>\n          <DropdownItem className=\"text-danger\" onClick={this.logOut}>\n            <i className=\"material-icons text-danger\">&#xE879;</i> {t('LOGOUT')}\n          </DropdownItem>\n        </Collapse>\n      </NavItem>\n    );\n  }\n}\n\nexport default withTranslation() (withRouter(UserActions));"]},"metadata":{},"sourceType":"module"}