{"ast":null,"code":"import _regeneratorRuntime from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/usr/local/lib/node_modules/react-scripts/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/angelvazquez/Dropbox/My Mac (Angels-MacBook-Pro-4.local)/Documents/Projects/Murmuration - 10:04:2021/src/components/layout/MainNavbar/NavbarNav/UserActions.js\";\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport { withRouter } from 'react-router';\nimport { Dropdown, DropdownToggle, DropdownMenu, DropdownItem, Collapse, NavItem, NavLink } from \"shards-react\";\nimport Parse from 'parse';\nimport { withTranslation } from 'react-i18next';\nimport PDF from '../../../../assets/HelpToolkit.pdf';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar UserActions = /*#__PURE__*/function (_React$Component) {\n  _inherits(UserActions, _React$Component);\n\n  var _super = _createSuper(UserActions);\n\n  function UserActions(props) {\n    var _this;\n\n    _classCallCheck(this, UserActions);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      visible: false,\n      userName: '',\n      email: ''\n    };\n    _this.toggleUserActions = _this.toggleUserActions.bind(_assertThisInitialized(_this));\n    _this.logOut = _this.logOut.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(UserActions, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var currUser = Parse.User.current();\n      this.getUserName(currUser);\n    }\n  }, {\n    key: \"getUserName\",\n    value: function () {\n      var _getUserName = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(user) {\n        var query, results, firstName, lastName, fullName, email;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = new Parse.Query(Parse.User);\n                query.equalTo(\"objectId\", user.id);\n                _context.next = 4;\n                return query.find();\n\n              case 4:\n                results = _context.sent;\n                firstName = results[0].get('firstName');\n                lastName = results[0].get('lastName');\n                fullName = firstName + ' ' + lastName;\n                email = results[0].get(\"username\");\n                console.log(email);\n                this.setState({\n                  userName: fullName,\n                  email: email\n                });\n\n              case 11:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getUserName(_x) {\n        return _getUserName.apply(this, arguments);\n      }\n\n      return getUserName;\n    }()\n  }, {\n    key: \"toggleUserActions\",\n    value: function toggleUserActions() {\n      this.setState({\n        visible: !this.state.visible\n      });\n    }\n  }, {\n    key: \"logOut\",\n    value: function logOut() {\n      var _this2 = this;\n\n      // console.log('Logout');\n      Parse.User.logOut().then(function () {\n        var currentUser = Parse.User.current(); // this will now be null\n        // console.log(currentUser);\n\n        _this2.props.history.push(\"/login\");\n      });\n    }\n  }, {\n    key: \"help\",\n    value: function help() {\n      // Open PDF\n      window.open(PDF);\n    }\n  }, {\n    key: \"resetPassword\",\n    value: function resetPassword() {\n      var user = Parse.User.current();\n      user.fetch().then(function (fetchedUser) {\n        var email = fetchedUser.getUsername();\n        var newPassword = prompt('Enter your new password:');\n        fetchedUser.set(\"password\", newPassword);\n        fetchedUser.save().then(function () {\n          alert('Success.');\n        });\n      }, function (error) {\n        //Handle the error\n        console.log('Error getting email.');\n      }); // console.log(email)\n      // Parse.User.requestPasswordReset(email).then((succ, error) => {\n      //   if (error) {\n      //     console.log('Error...')\n      //   } else {\n      //     console.log('Success!')\n      //   }\n      // })\n      // console.log('Logout');\n      // Parse.User.logOut().then(() => {\n      //   var currentUser = Parse.User.current();  // this will now be null\n      //   // console.log(currentUser);\n      //   this.props.history.push(\"/login\");\n      // });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var userName = this.state.userName;\n      var t = this.props.t;\n      return /*#__PURE__*/_jsxDEV(NavItem, {\n        tag: Dropdown,\n        caret: true,\n        toggle: this.toggleUserActions,\n        children: [/*#__PURE__*/_jsxDEV(DropdownToggle, {\n          caret: true,\n          tag: NavLink,\n          className: \"text-nowrap px-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"user-avatar rounded-circle mr-2\",\n            src: require(\"./../../../../images/avatars/user.png\"),\n            alt: \"User Avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 11\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"d-none d-md-inline-block\",\n            children: userName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Collapse, {\n          tag: DropdownMenu,\n          right: true,\n          small: true,\n          open: this.state.visible,\n          children: [/*#__PURE__*/_jsxDEV(DropdownItem, {\n            className: \"text-success\",\n            onClick: this.resetPassword,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"material-icons text-success\",\n              children: \"redo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 13\n            }, this), \" \", t('RESET_PASSWORD')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(DropdownItem, {\n            className: \"text-warning\",\n            onClick: function onClick() {\n              return _this3.help();\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"material-icons text-warning\",\n              children: \"help\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 13\n            }, this), \" \", t('HELP')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(DropdownItem, {\n            className: \"text-danger\",\n            onClick: this.logOut,\n            children: [/*#__PURE__*/_jsxDEV(\"i\", {\n              className: \"material-icons text-danger\",\n              children: \"\\uE879\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 13\n            }, this), \" \", t('LOGOUT')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 7\n      }, this);\n    }\n  }]);\n\n  return UserActions;\n}(React.Component);\n\nexport default withTranslation()(withRouter(UserActions));","map":{"version":3,"sources":["/Users/angelvazquez/Dropbox/My Mac (Angels-MacBook-Pro-4.local)/Documents/Projects/Murmuration - 10:04:2021/src/components/layout/MainNavbar/NavbarNav/UserActions.js"],"names":["React","Link","BrowserRouter","Route","withRouter","Dropdown","DropdownToggle","DropdownMenu","DropdownItem","Collapse","NavItem","NavLink","Parse","withTranslation","PDF","UserActions","props","state","visible","userName","email","toggleUserActions","bind","logOut","currUser","User","current","getUserName","user","query","Query","equalTo","id","find","results","firstName","get","lastName","fullName","console","log","setState","then","currentUser","history","push","window","open","fetch","fetchedUser","getUsername","newPassword","prompt","set","save","alert","error","t","require","resetPassword","help","Component"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,aAAT,EAAwBC,KAAxB,QAAqC,kBAArC;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SACEC,QADF,EAEEC,cAFF,EAGEC,YAHF,EAIEC,YAJF,EAKEC,QALF,EAMEC,OANF,EAOEC,OAPF,QAQO,cARP;AASA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,eAAT,QAAgC,eAAhC;AACA,OAAOC,GAAP,MAAgB,oCAAhB;;;IAGMC,W;;;;;AACJ,uBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,8BAAMA,KAAN;AAEA,UAAKC,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE,KADE;AAEXC,MAAAA,QAAQ,EAAE,EAFC;AAGXC,MAAAA,KAAK,EAAE;AAHI,KAAb;AAMA,UAAKC,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBC,IAAvB,+BAAzB;AACA,UAAKC,MAAL,GAAc,MAAKA,MAAL,CAAYD,IAAZ,+BAAd;AAViB;AAWlB;;;;WAED,8BAAqB;AACnB,UAAIE,QAAQ,GAAGZ,KAAK,CAACa,IAAN,CAAWC,OAAX,EAAf;AACA,WAAKC,WAAL,CAAiBH,QAAjB;AACD;;;;kFAED,iBAAkBI,IAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AACMC,gBAAAA,KADN,GACc,IAAIjB,KAAK,CAACkB,KAAV,CAAgBlB,KAAK,CAACa,IAAtB,CADd;AAEEI,gBAAAA,KAAK,CAACE,OAAN,CAAc,UAAd,EAA0BH,IAAI,CAACI,EAA/B;AAFF;AAAA,uBAGwBH,KAAK,CAACI,IAAN,EAHxB;;AAAA;AAGQC,gBAAAA,OAHR;AAIQC,gBAAAA,SAJR,GAIoBD,OAAO,CAAC,CAAD,CAAP,CAAWE,GAAX,CAAe,WAAf,CAJpB;AAKQC,gBAAAA,QALR,GAKmBH,OAAO,CAAC,CAAD,CAAP,CAAWE,GAAX,CAAe,UAAf,CALnB;AAMQE,gBAAAA,QANR,GAMmBH,SAAS,GAAG,GAAZ,GAAkBE,QANrC;AAOQjB,gBAAAA,KAPR,GAOgBc,OAAO,CAAC,CAAD,CAAP,CAAWE,GAAX,CAAe,UAAf,CAPhB;AAQEG,gBAAAA,OAAO,CAACC,GAAR,CAAYpB,KAAZ;AACA,qBAAKqB,QAAL,CAAc;AACZtB,kBAAAA,QAAQ,EAAEmB,QADE;AAEZlB,kBAAAA,KAAK,EAAEA;AAFK,iBAAd;;AATF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;;;;;;;;;;WAeA,6BAAoB;AAClB,WAAKqB,QAAL,CAAc;AACZvB,QAAAA,OAAO,EAAE,CAAC,KAAKD,KAAL,CAAWC;AADT,OAAd;AAGD;;;WAED,kBAAS;AAAA;;AACP;AACAN,MAAAA,KAAK,CAACa,IAAN,CAAWF,MAAX,GAAoBmB,IAApB,CAAyB,YAAM;AAC7B,YAAIC,WAAW,GAAG/B,KAAK,CAACa,IAAN,CAAWC,OAAX,EAAlB,CAD6B,CACY;AACzC;;AACA,QAAA,MAAI,CAACV,KAAL,CAAW4B,OAAX,CAAmBC,IAAnB,CAAwB,QAAxB;AACD,OAJD;AAKD;;;WAED,gBAAO;AACL;AACAC,MAAAA,MAAM,CAACC,IAAP,CAAYjC,GAAZ;AACD;;;WAED,yBAAgB;AACd,UAAIc,IAAI,GAAGhB,KAAK,CAACa,IAAN,CAAWC,OAAX,EAAX;AACAE,MAAAA,IAAI,CAACoB,KAAL,GAAaN,IAAb,CAAkB,UAACO,WAAD,EAAiB;AACjC,YAAI7B,KAAK,GAAG6B,WAAW,CAACC,WAAZ,EAAZ;AACA,YAAMC,WAAW,GAAGC,MAAM,CAAC,0BAAD,CAA1B;AACAH,QAAAA,WAAW,CAACI,GAAZ,CAAgB,UAAhB,EAA4BF,WAA5B;AACAF,QAAAA,WAAW,CAACK,IAAZ,GAAmBZ,IAAnB,CAAwB,YAAM;AAC5Ba,UAAAA,KAAK,CAAC,UAAD,CAAL;AACD,SAFD;AAGD,OAPD,EAOG,UAASC,KAAT,EAAe;AACd;AACAjB,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACH,OAVD,EAFc,CAad;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD;;;WAED,kBAAS;AAAA;;AACP,UAAQrB,QAAR,GAAqB,KAAKF,KAA1B,CAAQE,QAAR;AACA,UAAQsC,CAAR,GAAc,KAAKzC,KAAnB,CAAQyC,CAAR;AACA,0BACE,QAAC,OAAD;AAAS,QAAA,GAAG,EAAEpD,QAAd;AAAwB,QAAA,KAAK,MAA7B;AAA8B,QAAA,MAAM,EAAE,KAAKgB,iBAA3C;AAAA,gCACE,QAAC,cAAD;AAAgB,UAAA,KAAK,MAArB;AAAsB,UAAA,GAAG,EAAEV,OAA3B;AAAoC,UAAA,SAAS,EAAC,kBAA9C;AAAA,kCACE;AACE,YAAA,SAAS,EAAC,iCADZ;AAEE,YAAA,GAAG,EAAE+C,OAAO,CAAC,uCAAD,CAFd;AAGE,YAAA,GAAG,EAAC;AAHN;AAAA;AAAA;AAAA;AAAA,kBADF,EAKK,GALL,eAME;AAAM,YAAA,SAAS,EAAC,0BAAhB;AAAA,sBAA4CvC;AAA5C;AAAA;AAAA;AAAA;AAAA,kBANF;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eASE,QAAC,QAAD;AAAU,UAAA,GAAG,EAAEZ,YAAf;AAA6B,UAAA,KAAK,MAAlC;AAAmC,UAAA,KAAK,MAAxC;AAAyC,UAAA,IAAI,EAAE,KAAKU,KAAL,CAAWC,OAA1D;AAAA,kCACE,QAAC,YAAD;AAAc,YAAA,SAAS,EAAC,cAAxB;AAAuC,YAAA,OAAO,EAAE,KAAKyC,aAArD;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,6BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,OACuDF,CAAC,CAAC,gBAAD,CADxD;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAIE,QAAC,YAAD;AAAc,YAAA,SAAS,EAAC,cAAxB;AAAuC,YAAA,OAAO,EAAE;AAAA,qBAAM,MAAI,CAACG,IAAL,EAAN;AAAA,aAAhD;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,6BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,OACuDH,CAAC,CAAC,MAAD,CADxD;AAAA;AAAA;AAAA;AAAA;AAAA,kBAJF,eAOE,QAAC,YAAD;AAAc,YAAA,SAAS,EAAC,aAAxB;AAAsC,YAAA,OAAO,EAAE,KAAKlC,MAApD;AAAA,oCACE;AAAG,cAAA,SAAS,EAAC,4BAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,OAC0DkC,CAAC,CAAC,QAAD,CAD3D;AAAA;AAAA;AAAA;AAAA;AAAA,kBAPF;AAAA;AAAA;AAAA;AAAA;AAAA,gBATF;AAAA;AAAA;AAAA;AAAA;AAAA,cADF;AAuBD;;;;EA7GuBzD,KAAK,CAAC6D,S;;AAgHhC,eAAehD,eAAe,GAAIT,UAAU,CAACW,WAAD,CAAd,CAA9B","sourcesContent":["import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { BrowserRouter, Route } from 'react-router-dom';\nimport { withRouter } from 'react-router'\nimport {\n  Dropdown,\n  DropdownToggle,\n  DropdownMenu,\n  DropdownItem,\n  Collapse,\n  NavItem,\n  NavLink\n} from \"shards-react\";\nimport Parse from 'parse';\nimport { withTranslation } from 'react-i18next';\nimport PDF from '../../../../assets/HelpToolkit.pdf';\n\n\nclass UserActions extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      visible: false,\n      userName: '', \n      email: ''\n    };\n\n    this.toggleUserActions = this.toggleUserActions.bind(this);\n    this.logOut = this.logOut.bind(this);\n  }\n\n  componentWillMount() {\n    let currUser = Parse.User.current();\n    this.getUserName(currUser);\n  }\n\n  async getUserName(user) {\n    var query = new Parse.Query(Parse.User);\n    query.equalTo(\"objectId\", user.id);\n    const results = await query.find();\n    const firstName = results[0].get('firstName');\n    const lastName = results[0].get('lastName');\n    const fullName = firstName + ' ' + lastName;\n    const email = results[0].get(\"username\")\n    console.log(email)\n    this.setState({\n      userName: fullName, \n      email: email\n    });\n  }\n\n  toggleUserActions() {\n    this.setState({\n      visible: !this.state.visible\n    });\n  }\n\n  logOut() {\n    // console.log('Logout');\n    Parse.User.logOut().then(() => {\n      var currentUser = Parse.User.current();  // this will now be null\n      // console.log(currentUser);\n      this.props.history.push(\"/login\");\n    });\n  }\n\n  help() {\n    // Open PDF\n    window.open(PDF);\n  }\n\n  resetPassword() {\n    var user = Parse.User.current();\n    user.fetch().then((fetchedUser) => {\n      var email = fetchedUser.getUsername();\n      const newPassword = prompt('Enter your new password:')\n      fetchedUser.set(\"password\", newPassword)\n      fetchedUser.save().then(() => {\n        alert('Success.')\n      });\n    }, function(error){\n        //Handle the error\n        console.log('Error getting email.')\n    });\n    // console.log(email)\n    // Parse.User.requestPasswordReset(email).then((succ, error) => {\n    //   if (error) {\n    //     console.log('Error...')\n    //   } else {\n    //     console.log('Success!')\n    //   }\n    // })\n    // console.log('Logout');\n    // Parse.User.logOut().then(() => {\n    //   var currentUser = Parse.User.current();  // this will now be null\n    //   // console.log(currentUser);\n    //   this.props.history.push(\"/login\");\n    // });\n  }\n\n  render() {\n    const { userName } = this.state;\n    const { t } = this.props;\n    return (\n      <NavItem tag={Dropdown} caret toggle={this.toggleUserActions}>\n        <DropdownToggle caret tag={NavLink} className=\"text-nowrap px-3\">\n          <img\n            className=\"user-avatar rounded-circle mr-2\"\n            src={require(\"./../../../../images/avatars/user.png\")}\n            alt=\"User Avatar\"\n          />{\" \"}\n          <span className=\"d-none d-md-inline-block\">{userName}</span>\n        </DropdownToggle>\n        <Collapse tag={DropdownMenu} right small open={this.state.visible}>\n          <DropdownItem className=\"text-success\" onClick={this.resetPassword}>\n            <i className=\"material-icons text-success\">redo</i> {t('RESET_PASSWORD')}\n          </DropdownItem>\n          <DropdownItem className=\"text-warning\" onClick={() => this.help()}>\n            <i className=\"material-icons text-warning\">help</i> {t('HELP')}\n          </DropdownItem>\n          <DropdownItem className=\"text-danger\" onClick={this.logOut}>\n            <i className=\"material-icons text-danger\">&#xE879;</i> {t('LOGOUT')}\n          </DropdownItem>\n        </Collapse>\n      </NavItem>\n    );\n  }\n}\n\nexport default withTranslation() (withRouter(UserActions));"]},"metadata":{},"sourceType":"module"}