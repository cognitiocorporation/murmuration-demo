{"ast":null,"code":"import _regeneratorRuntime from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/angelvazquez/Desktop/murmuration-demo/src/components/administration/ManagementIdeaTable.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Badge, Card, CardHeader, CardBody, CardFooter, Container, Row, Col, FormSelect, ButtonGroup, Button, InputGroup, InputGroupAddon, InputGroupText, FormInput, Form } from \"shards-react\";\nimport Chart from \"../../utils/chart\";\nimport colors from \"../../utils/colors\";\nimport SingleProgressChart from \"../analytics/GoalsOverview/SingleProgressChart\";\nimport Parse from 'parse';\nimport moment from 'moment';\nimport { withTranslation } from 'react-i18next';\n\nvar ManagementIdeaTable = /*#__PURE__*/function (_React$Component) {\n  _inherits(ManagementIdeaTable, _React$Component);\n\n  function ManagementIdeaTable(props) {\n    var _this;\n\n    _classCallCheck(this, ManagementIdeaTable);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ManagementIdeaTable).call(this, props));\n\n    _this.arrayIncludesInObj = function (arr, key, valueToCheck) {\n      return arr.some(function (value) {\n        return value[key] === valueToCheck;\n      });\n    };\n\n    _this.state = {\n      ideas: [],\n      evalCriteria: [],\n      filteredIdeas: [],\n      title: ''\n    };\n    return _this;\n  }\n\n  _createClass(ManagementIdeaTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getEvalQuery();\n      this.getEvalCriteria();\n      this.fetchIdeas();\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      console.log(newProps);\n      this.filterIdeas(newProps.category, newProps.status, newProps.ideaType, newProps.filterQuestion);\n    }\n  }, {\n    key: \"getEvalQuery\",\n    value: function getEvalQuery() {\n      var currentUser = Parse.User.current();\n      var evalCriteria = currentUser.get(\"evaluationCriteria\");\n      console.log('MY EVAL CRITERIA');\n      console.log(evalCriteria);\n      var myQueries = [];\n\n      for (var i in evalCriteria) {\n        var ItemClass = Parse.Object.extend(\"Idea\");\n        var deptQuery = new Parse.Query(ItemClass);\n        myQueries.push(deptQuery.equalTo(\"department\", evalCriteria[i]));\n      }\n\n      console.log(myQueries);\n      return myQueries;\n    }\n  }, {\n    key: \"getEvalCriteria\",\n    value: function () {\n      var _getEvalCriteria = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var currentUser, evalCriteria;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                currentUser = Parse.User.current();\n                evalCriteria = currentUser.get(\"evaluationCriteria\");\n                return _context.abrupt(\"return\", evalCriteria);\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function getEvalCriteria() {\n        return _getEvalCriteria.apply(this, arguments);\n      }\n\n      return getEvalCriteria;\n    }()\n  }, {\n    key: \"fetchIdeas\",\n    value: function () {\n      var _fetchIdeas = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        var className, query, currentUser, evalCriteria;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                className = \"Idea\"; // const evalCriteria = await this.getEvalCriteria();\n                // var multipleQueries = this.getEvalQuery();\n                // console.log(multipleQueries);\n\n                query = new Parse.Query(className); // query.equalTo(\"status\", \"SOMETIDA\");\n\n                query.equalTo(\"needsEvaluation\", true);\n                query.equalTo(\"completed\", false);\n                query.descending(\"createdAt\");\n                currentUser = Parse.User.current();\n                _context2.next = 8;\n                return this.getEvalCriteria();\n\n              case 8:\n                evalCriteria = _context2.sent;\n                // evalCriteria.map((criteria) => {\n                //   console.log(criteria.type)\n                //   console.log(criteria.name)\n                // })\n                console.log(evalCriteria);\n                query.find().then(function (results) {\n                  var isSuperUser = currentUser.get(\"role\") == \"super_user\"; // const myResults = results.filter(result => result.get(\"department\") == 'Fill & Pack' || result.get(\"department\") == 'Planta 2')\n\n                  var i = 0;\n                  var myResultsT = []; // results.filter((result) => {\n                  //   for (i; i<evalCriteria.length; i++) {\n                  //     console.log(result.get(evalCriteria[i].type))\n                  //   }\n                  //   const evalCriteria = currentUser.get(\"evaluationCriteria\");\n                  //   // return evalCriteria.map((criteria) => {\n                  //   //   if (result.get(criteria.type) != criteria.name) {\n                  //   //     return false\n                  //   //   }\n                  //   //   return true;\n                  //   })\n                  // console.log(myResults)\n\n                  var evalCriteria = currentUser.get(\"evaluationCriteria\");\n                  var pmo = currentUser.get(\"pmo\"); //   var filtered = results.filter(\n                  //     function(e) {\n                  //       return this.indexOf(e.get(\"department\")) < 0;\n                  //     },\n                  //     evalCriteria\n                  // );\n\n                  var filtered = results.filter(function (result) {\n                    return evalCriteria.includes(result.get(\"department\"));\n                  }); //  console.log(evalCriteria)\n                  //   console.log(filtered)\n\n                  if (!pmo) {\n                    filtered = filtered.filter(function (result) {\n                      return result.get('status') != 'Idea Proyecto';\n                    }); // const secondFilter = filtered.filter(result => evalCriteria.includes(result.get(\"department\")))\n                    // filtered = secondFilter\n                  } else {\n                    var pmoIdeas = results.filter(function (result) {\n                      return result.get('status') == 'Idea Proyecto';\n                    });\n                    var withoutDuplicates = filtered.concat(pmoIdeas.filter(function (item) {\n                      return filtered.indexOf(item) < 0;\n                    }));\n                    filtered = withoutDuplicates;\n                  }\n\n                  console.log(pmo);\n                  console.log(pmoIdeas);\n                  console.log(filtered);\n\n                  _this2.setState({\n                    ideas: filtered,\n                    //isSuperUser?results:myResultsT,\n                    filteredIdeas: isSuperUser ? results : filtered //isSuperUser?results:myResultsT,\n\n                  });\n                }, function (error) {\n                  alert('Hubo un error en la busqueda. Favor de tratar luego.'); // The object was not retrieved successfully.\n                  // error is a Parse.Error with an error code and message.\n                });\n\n              case 11:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function fetchIdeas() {\n        return _fetchIdeas.apply(this, arguments);\n      }\n\n      return fetchIdeas;\n    }()\n  }, {\n    key: \"filterIdeas\",\n    value: function filterIdeas(categoryName, status, ideaType, filterQuestion) {\n      var newCategory = categoryName;\n      var newStatus = status;\n      var newType = ideaType;\n      console.log(filterQuestion);\n      var nuevo = this.state.ideas.map(function (item) {\n        item.get(\"questionAnswer\").find(function (elem) {\n          return elem.answer == filterQuestion;\n        });\n      });\n      console.log(nuevo);\n      var _this$state = this.state,\n          ideas = _this$state.ideas,\n          filteredIdeas = _this$state.filteredIdeas;\n      var filteredData;\n\n      if (newCategory !== 'Todas' && newCategory !== '') {\n        console.log('CATEGORY');\n        filteredData = ideas.filter(function (item) {\n          return item.get(\"category\") === newCategory;\n        });\n        filteredData = status && status != 'Todos' ? filteredData.filter(function (item) {\n          return item.get(\"status\") === newStatus;\n        }) : filteredData;\n        filteredData = ideaType && ideaType != 'Todos' ? filteredData.filter(function (item) {\n          return item.get(\"ideaType\") === newType;\n        }) : filteredData;\n      } else if (status !== 'Todas' && status !== '') {\n        console.log('STATUS');\n        filteredData = ideas;\n        filteredData = status != 'Todos' ? filteredData.filter(function (item) {\n          return item.get(\"status\") === newStatus;\n        }) : filteredData;\n        filteredData = ideaType && ideaType != 'Todos' ? filteredData.filter(function (item) {\n          return item.get(\"ideaType\") === newType;\n        }) : filteredData;\n        console.log('FILTRALO');\n      } else if (newCategory == '' && newStatus == '' && ideaType == '') {\n        filteredData = ideas;\n      } else {\n        filteredData = ideas;\n        filteredData = ideaType != 'todas' ? filteredData.filter(function (item) {\n          return item.get(\"ideaType\") === ideaType;\n        }) : filteredData;\n        console.log('FILTRALO TIPO');\n      }\n\n      this.setState({\n        filteredIdeas: filteredData\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state2 = this.state,\n          ideas = _this$state2.ideas,\n          filteredIdeas = _this$state2.filteredIdeas,\n          title = _this$state2.title;\n      var t = this.props.t;\n      return /*#__PURE__*/React.createElement(Card, {\n        small: true,\n        className: \"lo-stats h-150\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CardBody, {\n        className: \"p-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        className: \"px-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        className: \"py-2 bg-light text-semibold border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 19\n        }\n      }, t(\"IDEA_MANAGE_OPEN\")), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 19\n        }\n      }, t(\"IDEA_MANAGE_NUM\")), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 19\n        }\n      }, t(\"IDEA_MANAGE_TITLE\")), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 19\n        }\n      }, t(\"IDEA_MANAGE_CATEGORY\")), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 19\n        }\n      }, t(\"IDEA_MANAGE_PROP\")), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 19\n        }\n      }, t(\"IDEA_MANAGE_STATUS\")), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 19\n        }\n      }, t(\"IDEA_MANAGE_EVALUATE\")))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 15\n        }\n      }, filteredIdeas.map(function (item, idx) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: idx,\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          className: \"lo-stats__actions \",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(ButtonGroup, {\n          className: \"d-table ml-auto\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          pill: true,\n          outline: true,\n          size: \"sm\",\n          theme: \"danger\",\n          onClick: function onClick() {\n            return _this3.props.onViewIdeaPress(item);\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 25\n          }\n        }, \"visibility\")))), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"lo-stats__order-details text-center \",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 21\n          }\n        }, item.get(\"num\")), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"lo-stats__total text-center\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 21\n          }\n        }, item.get(\"title\")), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"lo-stats__total text-center text-success\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 21\n          }\n        }, item.get(\"category\")), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"lo-stats__items text-center\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 21\n          }\n        }, item.get(\"proponentName\")), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"lo-stats__status\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 242,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"d-table mx-auto\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Badge, {\n          pill: true,\n          theme: getBadgeType(item.get(\"status\")),\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 25\n          }\n        }, item.get(\"status\")))), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"lo-stats__actions \",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(ButtonGroup, {\n          className: \"d-table ml-auto\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          pill: true,\n          outline: true,\n          size: \"sm\",\n          theme: \"danger\",\n          onClick: function onClick() {\n            return _this3.props.onEditActionPress(item);\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"i\", {\n          className: \"material-icons\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 25\n          }\n        }, \"create\")))));\n      }))))));\n    }\n  }, {\n    key: \"fullName\",\n    get: function get() {}\n  }]);\n\n  return ManagementIdeaTable;\n}(React.Component); // const LatestOrders = ({ title, latestOrdersData }) => (\n//   <Card small className=\"lo-stats h-100\">\n//     <CardHeader className=\"border-bottom\">\n//       <h6 className=\"m-0\">{title}</h6>\n//       <div className=\"block-handle\" />\n//       {/* INSERT SEARCH HERE */}\n//     </CardHeader>\n//     <CardBody className=\"p-0\">\n//       <Container fluid className=\"px-0\">\n//         <table className=\"table mb-0\">\n//           <thead className=\"py-2 bg-light text-semibold border-bottom\">\n//             <tr>\n//               <th>Num. de Idea</th>\n//               <th className=\"text-center\">Nombre del Proceso</th>\n//               <th className=\"text-center\">Proponente</th>\n//               <th className=\"text-center\">Progreso</th>\n//               <th className=\"text-center\">Status</th>\n//               <th className=\"text-right\">Acciones</th>\n//             </tr>\n//           </thead>\n//           <tbody>\n//             {latestOrdersData.map((item, idx) => (\n//               <tr key={idx}>\n//                 <td className=\"lo-stats__order-details\">\n//                   {item.id}\n//                 </td>\n//                 <td className=\"lo-stats__total text-center text-success\">\n//                   {item.total}\n//                 </td>\n//                 <td className=\"lo-stats__items text-center\">{item.items}</td>\n//                 <td><SingleProgressChart key={idx} idea={item}/></td>\n//                 <td className=\"lo-stats__status\">\n//                   <div className=\"d-table mx-auto\">\n//                     <Badge pill theme={getBadgeType(item.status)}>\n//                       {item.status}\n//                     </Badge>\n//                   </div>\n//                 </td>\n//                 <td className=\"lo-stats__actions\">\n//                   <ButtonGroup className=\"d-table ml-auto\">\n//                     <Button size=\"sm\" theme=\"white\">\n//                       View\n//                     </Button>\n//                   </ButtonGroup>\n//                 </td>\n//               </tr>\n//             ))}\n//           </tbody>\n//         </table>\n//       </Container>\n//     </CardBody>\n//     <CardFooter className=\"border-top\">\n//       <Row>\n//         {/* Time Span */}\n//         <Col>\n//           <FormSelect\n//             size=\"sm\"\n//             value=\"last-week\"\n//             style={{ maxWidth: \"130px\" }}\n//             onChange={() => {}}\n//           >\n//             <option value=\"last-week\">Last Week</option>\n//             <option value=\"today\">Today</option>\n//             <option value=\"last-month\">Last Month</option>\n//             <option value=\"last-year\">Last Year</option>\n//           </FormSelect>\n//         </Col>\n//         {/* View Full Report */}\n//         <Col className=\"text-right view-report\">\n//           {/* eslint-disable-next-line */}\n//           <a href=\"#\">View full report &rarr;</a>\n//         </Col>\n//       </Row>\n//     </CardFooter>\n//   </Card>\n// );\n\n/**\n * Returns the badge type for a specific\n */\n\n\nfunction getBadgeType(itemStatus) {\n  var statusMap = {\n    Complete: \"success\",\n    Saved: \"warning\",\n    Canceled: \"danger\"\n  };\n  return statusMap[itemStatus];\n}\n\nfunction getProgressChart(itemProgress) {\n  var progressString = itemProgress[0] + \"%\";\n  var progressChart = {\n    data: {\n      conversionRate: progressString,\n      datasets: [{\n        hoverBorderColor: \"#fff\",\n        data: itemProgress,\n        backgroundColor: [colors.primary.toRGBA(0.9), colors.athensGray.toRGBA(0.8)]\n      }],\n      labels: [\"Label 1\", \"Label 2\"]\n    }\n  };\n  return progressChart;\n} // function \n// LatestOrders.propTypes = {\n//   /**\n//    * The component's title.\n//    */\n//   title: PropTypes.string,\n//   /**\n//    * The latest orders data.\n//    */\n//   latestOrdersData: PropTypes.array\n// };\n// LatestOrders.defaultProps = {\n//   title: \"Lista de IDEA\",\n//   latestOrdersData: [\n//     {\n//       id: \"#000001\",\n//       date: \"3/15/2019 9:30AM\",\n//       status: \"Just do It\",\n//       items: \"Sierra Brooks\",\n//       total: \"Manufactura\", \n//       conversionRate: \"75%\",\n//       data: {\n//         datasets: [\n//           {\n//             hoverBorderColor: \"#fff\",\n//             data: [75, 25],\n//             backgroundColor: [\n//               colors.primary.toRGBA(0.9),\n//               colors.athensGray.toRGBA(0.8)\n//             ]\n//           }\n//         ],\n//         labels: [\"Label 1\", \"Label 2\"]\n//       }\n//     },\n//     {\n//       id: \"#000002\",\n//       date: \"3/21/2019 10:00AM\",\n//       status: \"Just do It\",\n//       items: \"Sierra Brooks\",\n//       total: \"Produccion\",\n//       conversionRate: \"50%\",\n//       data: {\n//         datasets: [\n//           {\n//             hoverBorderColor: \"#fff\",\n//             data: [50, 50],\n//             backgroundColor: [\n//               colors.warning.toRGBA(0.9),\n//               colors.athensGray.toRGBA(0.8)\n//             ]\n//           }\n//         ],\n//         labels: [\"Label 1\", \"Label 2\"]\n//       }\n//     },\n//     {\n//       id: \"#000003\",\n//       date: \"3/22/2019 5:00PM\",\n//       status: \"Just do It\",\n//       items: \"Sierra Brooks\",\n//       total: \"Calidad\",\n//       conversionRate: \"50%\",\n//       data: {\n//         datasets: [\n//           {\n//             hoverBorderColor: \"#fff\",\n//             data: [50, 50],\n//             backgroundColor: [\n//               colors.warning.toRGBA(0.9),\n//               colors.athensGray.toRGBA(0.8)\n//             ]\n//           }\n//         ],\n//         labels: [\"Label 1\", \"Label 2\"]\n//       }\n//     },\n//     {\n//       id: \"#000004\",\n//       date: \"5/28/2019 2:00PM\",\n//       status: \"Just do It\",\n//       items: \"Sierra Brooks\",\n//       total: \"Seguridad\",\n//       conversionRate: \"25%\",\n//       data: {\n//         datasets: [\n//           {\n//             hoverBorderColor: \"#fff\",\n//             data: [25, 75],\n//             backgroundColor: [\n//               colors.salmon.toRGBA(0.9),\n//               colors.athensGray.toRGBA(0.8)\n//             ]\n//           }\n//         ],\n//         labels: [\"Label 1\", \"Label 2\"]\n//       }\n//     }\n//   ]\n// };\n\n\nexport default withTranslation()(ManagementIdeaTable);","map":{"version":3,"sources":["/Users/angelvazquez/Desktop/murmuration-demo/src/components/administration/ManagementIdeaTable.js"],"names":["React","PropTypes","Badge","Card","CardHeader","CardBody","CardFooter","Container","Row","Col","FormSelect","ButtonGroup","Button","InputGroup","InputGroupAddon","InputGroupText","FormInput","Form","Chart","colors","SingleProgressChart","Parse","moment","withTranslation","ManagementIdeaTable","props","arrayIncludesInObj","arr","key","valueToCheck","some","value","state","ideas","evalCriteria","filteredIdeas","title","getEvalQuery","getEvalCriteria","fetchIdeas","newProps","console","log","filterIdeas","category","status","ideaType","filterQuestion","currentUser","User","current","get","myQueries","i","ItemClass","Object","extend","deptQuery","Query","push","equalTo","className","query","descending","find","then","results","isSuperUser","myResultsT","pmo","filtered","filter","result","includes","pmoIdeas","withoutDuplicates","concat","item","indexOf","setState","error","alert","categoryName","newCategory","newStatus","newType","nuevo","map","elem","answer","filteredData","t","idx","onViewIdeaPress","getBadgeType","onEditActionPress","Component","itemStatus","statusMap","Complete","Saved","Canceled","getProgressChart","itemProgress","progressString","progressChart","data","conversionRate","datasets","hoverBorderColor","backgroundColor","primary","toRGBA","athensGray","labels"],"mappings":"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AACD,UAAD,CAAhB;AACD;;AAED,SAASK,gBAAT,CAA0BC,YAA1B,EAAwC;AACtC,MAAMC,cAAc,GAAGD,YAAY,CAAC,CAAD,CAAZ,GAAkB,GAAzC;AACA,MAAME,aAAa,GAAG;AACpBC,IAAAA,IAAI,EAAE;AACJC,MAAAA,cAAc,EAAEH,cADZ;AAEJI,MAAAA,QAAQ,EAAE,CACR;AACEC,QAAAA,gBAAgB,EAAE,MADpB;AAEEH,QAAAA,IAAI,EAAEH,YAFR;AAGEO,QAAAA,eAAe,EAAE,CACf3F,MAAM,CAAC4F,OAAP,CAAeC,MAAf,CAAsB,GAAtB,CADe,EAEf7F,MAAM,CAAC8F,UAAP,CAAkBD,MAAlB,CAAyB,GAAzB,CAFe;AAHnB,OADQ,CAFN;AAYJE,MAAAA,MAAM,EAAE,CAAC,SAAD,EAAY,SAAZ;AAZJ;AADc,GAAtB;AAiBA,SAAOT,aAAP;AACD,C,CAED;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,eAAelF,eAAe,GAAGC,mBAAH,CAA9B","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Badge,\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  Container,\n  Row,\n  Col,\n  FormSelect,\n  ButtonGroup,\n  Button,\n  InputGroup,\n  InputGroupAddon, \n  InputGroupText, \n  FormInput,\n  Form,\n} from \"shards-react\";\nimport Chart from \"../../utils/chart\";\nimport colors from \"../../utils/colors\";\nimport SingleProgressChart from \"../analytics/GoalsOverview/SingleProgressChart\";\nimport Parse from 'parse';\nimport moment from 'moment';\nimport {withTranslation} from 'react-i18next';\n\nclass ManagementIdeaTable extends React.Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      ideas:[],\n      evalCriteria: [],\n      filteredIdeas:[],\n      title:''\n    }\n  }\n\n  componentDidMount() {\n    this.getEvalQuery();\n    this.getEvalCriteria();\n    this.fetchIdeas();\n  }\n\n  componentWillReceiveProps(newProps) {\n      console.log(newProps);\n      this.filterIdeas(newProps.category, newProps.status, newProps.ideaType, newProps.filterQuestion);\n  }\n\n  getEvalQuery() {\n    const currentUser = Parse.User.current();\n    const evalCriteria = currentUser.get(\"evaluationCriteria\");\n    console.log('MY EVAL CRITERIA')\n    console.log(evalCriteria)\n\n    var myQueries = [];\n\n    for (var i in evalCriteria) {\n      var ItemClass = Parse.Object.extend(\"Idea\");\n      var deptQuery = new Parse.Query(ItemClass);\n      myQueries.push(deptQuery.equalTo(\"department\", evalCriteria[i]))\n    }\n    \n    console.log(myQueries)\n    return myQueries;\n  }\n\n  async getEvalCriteria() {\n    const currentUser = Parse.User.current();\n    const evalCriteria = currentUser.get(\"evaluationCriteria\");\n    return evalCriteria;\n  }\n\n  async fetchIdeas() {\n    const className = \"Idea\";\n    // const evalCriteria = await this.getEvalCriteria();\n\n    // var multipleQueries = this.getEvalQuery();\n\n    // console.log(multipleQueries);\n    var query = new Parse.Query(className);\n\n    // query.equalTo(\"status\", \"SOMETIDA\");\n    query.equalTo(\"needsEvaluation\", true);\n    query.equalTo(\"completed\", false);\n    query.descending(\"createdAt\");\n    \n    const currentUser = Parse.User.current();\n    const evalCriteria = await this.getEvalCriteria()\n    // evalCriteria.map((criteria) => {\n    //   console.log(criteria.type)\n    //   console.log(criteria.name)\n    // })\n    console.log(evalCriteria)\n\n    query.find()\n    .then((results) => {\n      const isSuperUser = currentUser.get(\"role\") == \"super_user\"\n        // const myResults = results.filter(result => result.get(\"department\") == 'Fill & Pack' || result.get(\"department\") == 'Planta 2')\n        var i = 0\n        const myResultsT = []\n        // results.filter((result) => {\n        //   for (i; i<evalCriteria.length; i++) {\n        //     console.log(result.get(evalCriteria[i].type))\n        //   }\n\n        //   const evalCriteria = currentUser.get(\"evaluationCriteria\");\n        //   // return evalCriteria.map((criteria) => {\n        //   //   if (result.get(criteria.type) != criteria.name) {\n        //   //     return false\n        //   //   }\n        //   //   return true;\n        //   })\n        // console.log(myResults)\n      const evalCriteria = currentUser.get(\"evaluationCriteria\");\n      const pmo = currentUser.get(\"pmo\");\n\n      //   var filtered = results.filter(\n      //     function(e) {\n      //       return this.indexOf(e.get(\"department\")) < 0;\n      //     },\n      //     evalCriteria\n      // );\n        \n        var filtered = results.filter(result => evalCriteria.includes(result.get(\"department\")))\n      //  console.log(evalCriteria)\n      //   console.log(filtered)\n        \n        if (!pmo) {\n          filtered = filtered.filter(result => result.get('status') != 'Idea Proyecto')\n          // const secondFilter = filtered.filter(result => evalCriteria.includes(result.get(\"department\")))\n          // filtered = secondFilter\n        } else {\n          var pmoIdeas = results.filter(result => result.get('status') == 'Idea Proyecto')\n          var withoutDuplicates = filtered.concat(pmoIdeas.filter((item) => filtered.indexOf(item) < 0))\n          filtered = withoutDuplicates\n        }\n\n        console.log(pmo)\n        console.log(pmoIdeas)\n        console.log(filtered)\n        this.setState({\n            ideas: filtered,//isSuperUser?results:myResultsT,\n            filteredIdeas: isSuperUser?results:filtered//isSuperUser?results:myResultsT,\n        });\n    }, (error) => {\n      alert('Hubo un error en la busqueda. Favor de tratar luego.');\n      // The object was not retrieved successfully.\n      // error is a Parse.Error with an error code and message.\n    });\n  }\n\n  arrayIncludesInObj = (arr, key, valueToCheck) => {\n    return arr.some(value => value[key] === valueToCheck);\n  }\n\n  filterIdeas(categoryName, status, ideaType, filterQuestion) {\n    const newCategory = categoryName;\n    const newStatus = status;\n    const newType = ideaType;\n    console.log(filterQuestion)\n    const nuevo = this.state.ideas.map(item => {\n      item.get(\"questionAnswer\").find(elem => {\n        return elem.answer == filterQuestion\n      })\n    });\n    console.log(nuevo)\n\n    const { ideas, filteredIdeas } = this.state;\n    \n    var filteredData;\n    if (newCategory !== 'Todas' && newCategory !== '') {\n      console.log('CATEGORY')\n      filteredData = ideas.filter(item => item.get(\"category\") === newCategory);\n      filteredData = status && status!='Todos'?filteredData.filter(item => item.get(\"status\") === newStatus):filteredData;\n      filteredData = ideaType && ideaType!='Todos'?filteredData.filter(item => item.get(\"ideaType\") === newType):filteredData;\n    } else if(status !== 'Todas' && status !== ''){\n      console.log('STATUS')\n      filteredData = ideas;\n      filteredData = status!='Todos'?filteredData.filter(item => item.get(\"status\") === newStatus):filteredData;\n      filteredData = ideaType && ideaType!='Todos'?filteredData.filter(item => item.get(\"ideaType\") === newType):filteredData;\n      console.log('FILTRALO');\n    } else if(newCategory  == '' && newStatus == '' && ideaType == ''){\n      filteredData = ideas;\n    }\n    else {\n      filteredData = ideas;\n      filteredData = ideaType!='todas'?filteredData.filter(item => item.get(\"ideaType\") === ideaType):filteredData;\n      console.log('FILTRALO TIPO');\n    }\n    \n    this.setState({\n      filteredIdeas: filteredData\n    });\n  }\n\n  get fullName() {\n\n  }\n\n  render() {\n    const {ideas, filteredIdeas, title} = this.state;\n    const { t } = this.props;\n    return(\n      <Card small className=\"lo-stats h-150\">\n        <CardBody className=\"p-0\">\n          <Container fluid className=\"px-0\">\n            <table className=\"table mb-0\">\n              <thead className=\"py-2 bg-light text-semibold border-bottom\">\n                <tr>\n                  <th className=\"text-center\">{t(\"IDEA_MANAGE_OPEN\")}</th>\n                  <th className=\"text-center\">{t(\"IDEA_MANAGE_NUM\")}</th>\n                  {/* <th className=\"text-center\">Categoria</th> */}\n                  <th className=\"text-center\">{t(\"IDEA_MANAGE_TITLE\")}</th>\n                  <th className=\"text-center\">{t(\"IDEA_MANAGE_CATEGORY\")}</th>\n                  <th className=\"text-center\">{t(\"IDEA_MANAGE_PROP\")}</th>\n                  <th className=\"text-center\">{t(\"IDEA_MANAGE_STATUS\")}</th>\n                  <th className=\"text-right\">{t(\"IDEA_MANAGE_EVALUATE\")}</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredIdeas.map((item, idx) => (\n                  <tr key={idx}>\n                    <td className=\"lo-stats__actions \">\n                      <ButtonGroup className=\"d-table ml-auto\">\n                      <Button pill outline size=\"sm\" theme=\"danger\" onClick={() => this.props.onViewIdeaPress(item)}>\n                        <i className=\"material-icons\">visibility</i>\n                      </Button>\n                      </ButtonGroup>\n                      </td>\n                    <td className=\"lo-stats__order-details text-center \">\n                      {item.get(\"num\")}\n                    </td>\n                    <td className=\"lo-stats__total text-center\">\n                    {item.get(\"title\")}\n                    </td>\n                    <td className=\"lo-stats__total text-center text-success\">\n                    {item.get(\"category\")}\n                    </td>\n                    <td className=\"lo-stats__items text-center\">{item.get(\"proponentName\")}</td>\n                    <td className=\"lo-stats__status\">\n                      <div className=\"d-table mx-auto\">\n                        <Badge pill theme={getBadgeType(item.get(\"status\"))}>\n                          {item.get(\"status\")}\n                        </Badge>\n                      </div>\n                    </td>\n                    <td className=\"lo-stats__actions \">\n                      <ButtonGroup className=\"d-table ml-auto\">\n                        <Button pill outline size=\"sm\" theme=\"danger\" onClick={() => this.props.onEditActionPress(item)}>\n                        <i className=\"material-icons\">create</i>\n                        </Button>\n                      </ButtonGroup>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </Container>\n        </CardBody>\n      </Card>\n    )\n  }\n}\n\n// const LatestOrders = ({ title, latestOrdersData }) => (\n  \n//   <Card small className=\"lo-stats h-100\">\n//     <CardHeader className=\"border-bottom\">\n//       <h6 className=\"m-0\">{title}</h6>\n//       <div className=\"block-handle\" />\n//       {/* INSERT SEARCH HERE */}\n//     </CardHeader>\n\n//     <CardBody className=\"p-0\">\n//       <Container fluid className=\"px-0\">\n//         <table className=\"table mb-0\">\n//           <thead className=\"py-2 bg-light text-semibold border-bottom\">\n//             <tr>\n//               <th>Num. de Idea</th>\n//               <th className=\"text-center\">Nombre del Proceso</th>\n//               <th className=\"text-center\">Proponente</th>\n//               <th className=\"text-center\">Progreso</th>\n//               <th className=\"text-center\">Status</th>\n//               <th className=\"text-right\">Acciones</th>\n//             </tr>\n//           </thead>\n//           <tbody>\n//             {latestOrdersData.map((item, idx) => (\n//               <tr key={idx}>\n//                 <td className=\"lo-stats__order-details\">\n//                   {item.id}\n//                 </td>\n//                 <td className=\"lo-stats__total text-center text-success\">\n//                   {item.total}\n//                 </td>\n//                 <td className=\"lo-stats__items text-center\">{item.items}</td>\n//                 <td><SingleProgressChart key={idx} idea={item}/></td>\n//                 <td className=\"lo-stats__status\">\n//                   <div className=\"d-table mx-auto\">\n//                     <Badge pill theme={getBadgeType(item.status)}>\n//                       {item.status}\n//                     </Badge>\n//                   </div>\n//                 </td>\n//                 <td className=\"lo-stats__actions\">\n//                   <ButtonGroup className=\"d-table ml-auto\">\n//                     <Button size=\"sm\" theme=\"white\">\n//                       View\n//                     </Button>\n//                   </ButtonGroup>\n//                 </td>\n//               </tr>\n//             ))}\n//           </tbody>\n//         </table>\n//       </Container>\n//     </CardBody>\n\n//     <CardFooter className=\"border-top\">\n//       <Row>\n//         {/* Time Span */}\n//         <Col>\n//           <FormSelect\n//             size=\"sm\"\n//             value=\"last-week\"\n//             style={{ maxWidth: \"130px\" }}\n//             onChange={() => {}}\n//           >\n//             <option value=\"last-week\">Last Week</option>\n//             <option value=\"today\">Today</option>\n//             <option value=\"last-month\">Last Month</option>\n//             <option value=\"last-year\">Last Year</option>\n//           </FormSelect>\n//         </Col>\n\n//         {/* View Full Report */}\n//         <Col className=\"text-right view-report\">\n//           {/* eslint-disable-next-line */}\n//           <a href=\"#\">View full report &rarr;</a>\n//         </Col>\n//       </Row>\n//     </CardFooter>\n//   </Card>\n// );\n\n/**\n * Returns the badge type for a specific\n */\nfunction getBadgeType(itemStatus) {\n  const statusMap = {\n    Complete: \"success\",\n    Saved: \"warning\",\n    Canceled: \"danger\"\n  };\n\n  return statusMap[itemStatus];\n}\n\nfunction getProgressChart(itemProgress) {\n  const progressString = itemProgress[0] + \"%\";\n  const progressChart = {\n    data: {\n      conversionRate: progressString,\n      datasets: [\n        {\n          hoverBorderColor: \"#fff\",\n          data: itemProgress,\n          backgroundColor: [\n            colors.primary.toRGBA(0.9),\n            colors.athensGray.toRGBA(0.8)\n          ]\n        }\n      ],\n      labels: [\"Label 1\", \"Label 2\"]\n    }\n  };\n\n  return progressChart;\n}\n\n// function \n\n// LatestOrders.propTypes = {\n//   /**\n//    * The component's title.\n//    */\n//   title: PropTypes.string,\n\n//   /**\n//    * The latest orders data.\n//    */\n//   latestOrdersData: PropTypes.array\n// };\n\n// LatestOrders.defaultProps = {\n//   title: \"Lista de IDEA\",\n//   latestOrdersData: [\n//     {\n//       id: \"#000001\",\n//       date: \"3/15/2019 9:30AM\",\n//       status: \"Just do It\",\n//       items: \"Sierra Brooks\",\n//       total: \"Manufactura\", \n//       conversionRate: \"75%\",\n//       data: {\n//         datasets: [\n//           {\n//             hoverBorderColor: \"#fff\",\n//             data: [75, 25],\n//             backgroundColor: [\n//               colors.primary.toRGBA(0.9),\n//               colors.athensGray.toRGBA(0.8)\n//             ]\n//           }\n//         ],\n//         labels: [\"Label 1\", \"Label 2\"]\n//       }\n//     },\n//     {\n//       id: \"#000002\",\n//       date: \"3/21/2019 10:00AM\",\n//       status: \"Just do It\",\n//       items: \"Sierra Brooks\",\n//       total: \"Produccion\",\n//       conversionRate: \"50%\",\n//       data: {\n//         datasets: [\n//           {\n//             hoverBorderColor: \"#fff\",\n//             data: [50, 50],\n//             backgroundColor: [\n//               colors.warning.toRGBA(0.9),\n//               colors.athensGray.toRGBA(0.8)\n//             ]\n//           }\n//         ],\n//         labels: [\"Label 1\", \"Label 2\"]\n//       }\n//     },\n//     {\n//       id: \"#000003\",\n//       date: \"3/22/2019 5:00PM\",\n//       status: \"Just do It\",\n//       items: \"Sierra Brooks\",\n//       total: \"Calidad\",\n//       conversionRate: \"50%\",\n//       data: {\n//         datasets: [\n//           {\n//             hoverBorderColor: \"#fff\",\n//             data: [50, 50],\n//             backgroundColor: [\n//               colors.warning.toRGBA(0.9),\n//               colors.athensGray.toRGBA(0.8)\n//             ]\n//           }\n//         ],\n//         labels: [\"Label 1\", \"Label 2\"]\n//       }\n//     },\n//     {\n//       id: \"#000004\",\n//       date: \"5/28/2019 2:00PM\",\n//       status: \"Just do It\",\n//       items: \"Sierra Brooks\",\n//       total: \"Seguridad\",\n//       conversionRate: \"25%\",\n//       data: {\n//         datasets: [\n//           {\n//             hoverBorderColor: \"#fff\",\n//             data: [25, 75],\n//             backgroundColor: [\n//               colors.salmon.toRGBA(0.9),\n//               colors.athensGray.toRGBA(0.8)\n//             ]\n//           }\n//         ],\n//         labels: [\"Label 1\", \"Label 2\"]\n//       }\n//     }\n//   ]\n// };\n\nexport default withTranslation()(ManagementIdeaTable);\n"]},"metadata":{},"sourceType":"module"}