{"ast":null,"code":"import _defineProperty from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/angelvazquez/Desktop/murmuration-demo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/angelvazquez/Desktop/murmuration-demo/src/components/ecommerce/IdeaQuestions.js\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Badge, Card, CardHeader, CardBody, CardFooter, Container, Row, Col, FormSelect, ButtonGroup, Button, InputGroup, InputGroupAddon, InputGroupText, FormInput, Form } from \"shards-react\";\nimport Chart from \"../../utils/chart\";\nimport colors from \"../../utils/colors\";\nimport SingleProgressChart from \"../analytics/GoalsOverview/SingleProgressChart\";\nimport Parse from 'parse';\nimport { useTranslation, initReactI18next, withTranslation } from \"react-i18next\";\n\nvar IdeaQuestions = /*#__PURE__*/function (_React$Component) {\n  _inherits(IdeaQuestions, _React$Component);\n\n  function IdeaQuestions(props) {\n    var _this;\n\n    _classCallCheck(this, IdeaQuestions);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(IdeaQuestions).call(this, props));\n    _this.state = {\n      ideas: [],\n      filteredQuestions: [],\n      filter: 'Todas'\n    };\n    return _this;\n  }\n\n  _createClass(IdeaQuestions, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchNewData();\n    }\n  }, {\n    key: \"fetchNewData\",\n    value: function fetchNewData() {\n      var _this2 = this;\n\n      var filter = this.state.filter;\n      var className = \"IdeaQuestion\";\n      var ItemClass = Parse.Object.extend(className);\n      var query = new Parse.Query(ItemClass); // subscription.on('open', () => {\n      //   console.log('subscription opened');\n      //  });\n\n      var currentUser = Parse.User.current();\n      var userId = currentUser.get(\"username\");\n\n      if (filter == 'Todas') {\n        query = new Parse.Query(ItemClass);\n      } else {\n        query.equalTo(\"category\", filter);\n      }\n\n      query.find().then(function (results) {\n        _this2.setState({\n          ideas: results,\n          filteredQuestions: results\n        });\n      }, function (error) {\n        alert('Hubo un error en la busca. Favor de tratar luego.'); // The object was not retrieved successfully.\n        // error is a Parse.Error with an error code and message.\n      });\n    }\n  }, {\n    key: \"handleCategoryChange\",\n    value: function handleCategoryChange(event) {\n      var newCategory = event.target.value;\n      var _this$state = this.state,\n          ideas = _this$state.ideas,\n          filteredQuestions = _this$state.filteredQuestions;\n      console.log('FILTERED QUESTIONS');\n      console.log(ideas);\n      var filteredData;\n\n      if (newCategory !== 'Todas') {\n        filteredData = ideas.filter(function (item) {\n          return item.get(\"category\") === newCategory;\n        });\n      } else {\n        filteredData = ideas;\n      }\n\n      this.setState({\n        filter: newCategory,\n        filteredQuestions: filteredData\n      });\n    }\n  }, {\n    key: \"deleteItem\",\n    value: function deleteItem(item) {\n      var _this3 = this;\n\n      item.destroy({}).then(function (item) {\n        // Execute any logic that should take place after the object is saved.\n        _this3.fetchNewData();\n\n        alert('¡La operacion fue exitosa!');\n      }, function (error) {\n        // Execute any logic that should take place if the save fails.\n        // error is a Parse.Error with an error code and message.\n        alert('Hubo un error en la operacion: ' + error.message);\n      });\n    }\n  }, {\n    key: \"editItem\",\n    value: function editItem(item) {\n      var _this4 = this;\n\n      var newQuestion = prompt(\"Replace \\\"\" + item.get(\"question\") + \"\\\" with: \");\n\n      if (newQuestion != '') {\n        item.set(\"question\", newQuestion);\n        item.save().then(function (item) {\n          // Execute any logic that should take place after the object is saved.\n          _this4.fetchNewData();\n\n          alert('¡La operacion fue exitosa!');\n        }, function (error) {\n          // Execute any logic that should take place if the save fails.\n          // error is a Parse.Error with an error code and message.\n          alert('Hubo un error en la operacion: ' + error.message);\n        });\n      } else {\n        alert(\"Question cannot be left blank.\");\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this5 = this,\n          _React$createElement;\n\n      var _this$state2 = this.state,\n          ideas = _this$state2.ideas,\n          title = _this$state2.title,\n          filter = _this$state2.filter,\n          filteredQuestions = _this$state2.filteredQuestions;\n      var t = this.props.t;\n      return /*#__PURE__*/React.createElement(Card, {\n        className: \"lo-stats h-100\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        className: \"border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"m-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 11\n        }\n      }, t('QUESTION_LIST')), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"block-handle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(CardBody, {\n        className: \"p-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Container, {\n        fluid: true,\n        className: \"px-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"table\", {\n        className: \"table mb-0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        className: \"py-2 bg-light text-semibold border-bottom\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 19\n        }\n      }, t(\"QUESTION\")), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 19\n        }\n      }, t(\"CATEGORY\")), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 19\n        }\n      }, t(\"STATUS\")), /*#__PURE__*/React.createElement(\"th\", {\n        className: \"text-right\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 19\n        }\n      }, t(\"ACTIONS\")))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151,\n          columnNumber: 15\n        }\n      }, filteredQuestions.map(function (item, idx) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          key: idx,\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 19\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          className: \"lo-stats__order-details text-center\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 154,\n            columnNumber: 21\n          }\n        }, item.get(\"question\")), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"lo-stats__total text-center text-success\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 21\n          }\n        }, item.get(\"category\")), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"lo-stats__items text-center\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 21\n          }\n        }, item.get(\"required\") ? 'Requerida' : 'No Requerida'), /*#__PURE__*/React.createElement(\"td\", {\n          className: \"lo-stats__actions\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(ButtonGroup, {\n          className: \"d-table ml-auto\",\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          size: \"sm\",\n          theme: \"white\",\n          onClick: function onClick(e) {\n            return _this5.deleteItem(item);\n          },\n          __self: _this5,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 166,\n            columnNumber: 25\n          }\n        }, \"Borrar\"))));\n      }))))), /*#__PURE__*/React.createElement(CardFooter, {\n        className: \"border-top\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        className: \"text-right view-report\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(FormSelect, (_React$createElement = {\n        size: \"sm\",\n        value: \"filter\",\n        style: {\n          maxWidth: \"130px\"\n        },\n        onChange: this.handleCategoryChange.bind(this)\n      }, _defineProperty(_React$createElement, \"value\", filter), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 15\n      }), _React$createElement), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 17\n        }\n      }, \"Todas\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 17\n        }\n      }, \"Seguridad\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 17\n        }\n      }, \"Calidad\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 17\n        }\n      }, \"Productividad\"), /*#__PURE__*/React.createElement(\"option\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }\n      }, \"Accion Inmediata\"))))));\n    }\n  }]);\n\n  return IdeaQuestions;\n}(React.Component);\n/**\n * Returns the badge type for a specific\n */\n\n\nfunction getBadgeType(itemStatus) {\n  var statusMap = {\n    Complete: \"success\",\n    Saved: \"warning\",\n    Canceled: \"danger\"\n  };\n  return statusMap[itemStatus];\n}\n\nfunction getProgressChart(itemProgress) {\n  var progressString = itemProgress[0] + \"%\";\n  var progressChart = {\n    data: {\n      conversionRate: progressString,\n      datasets: [{\n        hoverBorderColor: \"#fff\",\n        data: itemProgress,\n        backgroundColor: [colors.primary.toRGBA(0.9), colors.athensGray.toRGBA(0.8)]\n      }],\n      labels: [\"Label 1\", \"Label 2\"]\n    }\n  };\n  return progressChart;\n}\n\nexport default withTranslation()(IdeaQuestions);","map":{"version":3,"sources":["/Users/angelvazquez/Desktop/murmuration-demo/src/components/ecommerce/IdeaQuestions.js"],"names":["React","PropTypes","Badge","Card","CardHeader","CardBody","CardFooter","Container","Row","Col","FormSelect","ButtonGroup","Button","InputGroup","InputGroupAddon","InputGroupText","FormInput","Form","Chart","colors","SingleProgressChart","Parse","useTranslation","initReactI18next","withTranslation","IdeaQuestions","props","state","ideas","filteredQuestions","filter","fetchNewData","className","ItemClass","Object","extend","query","Query","currentUser","User","current","userId","get","equalTo","find","then","results","setState","error","alert","event","newCategory","target","value","console","log","filteredData","item","destroy","message","newQuestion","prompt","set","save","title","t","map","idx","e","deleteItem","maxWidth","handleCategoryChange","bind","Component","getBadgeType","itemStatus","statusMap","Complete","Saved","Canceled","getProgressChart","itemProgress","progressString","progressChart","data","conversionRate","datasets","hoverBorderColor","backgroundColor","primary","toRGBA","athensGray","labels"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport {\n  Badge,\n  Card,\n  CardHeader,\n  CardBody,\n  CardFooter,\n  Container,\n  Row,\n  Col,\n  FormSelect,\n  ButtonGroup,\n  Button,\n  InputGroup,\n  InputGroupAddon, \n  InputGroupText, \n  FormInput,\n  Form,\n} from \"shards-react\";\nimport Chart from \"../../utils/chart\";\nimport colors from \"../../utils/colors\";\nimport SingleProgressChart from \"../analytics/GoalsOverview/SingleProgressChart\";\nimport Parse from 'parse';\nimport { useTranslation, initReactI18next, withTranslation } from \"react-i18next\";\n\n\nclass IdeaQuestions extends React.Component {\n  constructor(props){\n    super(props);\n\n    this.state = {\n      ideas:[],\n      filteredQuestions:[],\n      filter:'Todas'\n    }\n  }\n\n  componentDidMount() {\n    this.fetchNewData();\n  }\n\n  fetchNewData() {\n    const { filter } = this.state;\n    const className = \"IdeaQuestion\";\n\n    var ItemClass = Parse.Object.extend(className);\n    var query = new Parse.Query(ItemClass);\n\n    // subscription.on('open', () => {\n    //   console.log('subscription opened');\n    //  });\n\n    const currentUser = Parse.User.current();\n    const userId = currentUser.get(\"username\");\n\n\n    if (filter == 'Todas') {\n      query = new Parse.Query(ItemClass);\n    } else {\n      query.equalTo(\"category\", filter);\n    }\n\n    query.find()\n    .then((results) => {\n        this.setState({\n            ideas: results,\n            filteredQuestions: results\n        });\n    }, (error) => {\n      alert('Hubo un error en la busca. Favor de tratar luego.');\n      // The object was not retrieved successfully.\n      // error is a Parse.Error with an error code and message.\n    });\n  }\n\n  handleCategoryChange(event) {\n    const newCategory = event.target.value;\n    const { ideas, filteredQuestions } = this.state;\n    console.log('FILTERED QUESTIONS');\n    console.log(ideas);\n    \n    var filteredData;\n    if (newCategory !== 'Todas') {\n      filteredData = ideas.filter(item => item.get(\"category\") === newCategory);\n    }  else {\n      filteredData = ideas;\n    }\n    \n    this.setState({\n      filter: newCategory,\n      filteredQuestions: filteredData\n    });\n  }\n\n  deleteItem(item) {\n    item.destroy({})\n    .then((item) => {\n    // Execute any logic that should take place after the object is saved.\n      this.fetchNewData();\n      alert('¡La operacion fue exitosa!');\n    }, (error) => {\n      // Execute any logic that should take place if the save fails.\n      // error is a Parse.Error with an error code and message.\n      alert('Hubo un error en la operacion: ' + error.message);\n    });\n  }\n\n  editItem(item) {\n    var newQuestion = prompt(\"Replace \\\"\" + item.get(\"question\") +\"\\\" with: \");\n    if (newQuestion != '') {\n      item.set(\"question\", newQuestion)\n      item.save()\n      .then((item) => {\n      // Execute any logic that should take place after the object is saved.\n        this.fetchNewData();\n        alert('¡La operacion fue exitosa!');\n      }, (error) => {\n        // Execute any logic that should take place if the save fails.\n        // error is a Parse.Error with an error code and message.\n        alert('Hubo un error en la operacion: ' + error.message);\n      });\n    } else {\n      alert(\"Question cannot be left blank.\")\n    }\n  }\n\n  render() {\n    const {ideas, title, filter, filteredQuestions} = this.state;\n    const { t } = this.props;\n\n    return(\n      <Card className=\"lo-stats h-100\">\n        <CardHeader className=\"border-bottom\">\n          <h6 className=\"m-0\">{t('QUESTION_LIST')}</h6>\n          <div className=\"block-handle\" />\n          {/* INSERT SEARCH HERE */}\n        </CardHeader>\n\n        <CardBody className=\"p-0\">\n          <Container fluid className=\"px-0\">\n            <table className=\"table mb-0\">\n              <thead className=\"py-2 bg-light text-semibold border-bottom\">\n                <tr>\n                  <th className=\"text-center\">{t(\"QUESTION\")}</th>\n                  <th className=\"text-center\">{t(\"CATEGORY\")}</th>\n                  <th className=\"text-center\">{t(\"STATUS\")}</th>\n                  <th className=\"text-right\">{t(\"ACTIONS\")}</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredQuestions.map((item, idx) => (\n                  <tr key={idx}>\n                    <td className=\"lo-stats__order-details text-center\">\n                      {item.get(\"question\")}\n                    </td>\n                    <td className=\"lo-stats__total text-center text-success\">\n                      {item.get(\"category\")}\n                    </td>\n                    <td className=\"lo-stats__items text-center\">{item.get(\"required\") ? 'Requerida':'No Requerida'}</td>\n                    <td className=\"lo-stats__actions\">\n                      <ButtonGroup className=\"d-table ml-auto\">\n                        {/* <Button size=\"sm\" theme=\"white\" onClick={e => this.editItem(item)}>\n                          Editar\n                        </Button> */}\n                        <Button size=\"sm\" theme=\"white\" onClick={e => this.deleteItem(item)}>\n                          Borrar\n                        </Button>\n                      </ButtonGroup>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </Container>\n        </CardBody>\n\n        <CardFooter className=\"border-top\">\n          {/* View Full Report */}\n          <Col className=\"text-right view-report\">\n            \n          </Col>\n          <Row>\n            {/* Time Span */}\n            <Col>\n              <FormSelect\n                size=\"sm\"\n                value=\"filter\"\n                style={{ maxWidth: \"130px\" }}\n                onChange={this.handleCategoryChange.bind(this)} value={filter}\n              >\n                <option>Todas</option>\n                <option>Seguridad</option>\n                <option>Calidad</option>\n                <option>Productividad</option>\n                <option>Accion Inmediata</option>\n              </FormSelect>\n            </Col>\n          </Row>\n        </CardFooter>\n      </Card>\n    )\n  }\n}\n\n/**\n * Returns the badge type for a specific\n */\nfunction getBadgeType(itemStatus) {\n  const statusMap = {\n    Complete: \"success\",\n    Saved: \"warning\",\n    Canceled: \"danger\"\n  };\n\n  return statusMap[itemStatus];\n}\n\nfunction getProgressChart(itemProgress) {\n  const progressString = itemProgress[0] + \"%\";\n  const progressChart = {\n    data: {\n      conversionRate: progressString,\n      datasets: [\n        {\n          hoverBorderColor: \"#fff\",\n          data: itemProgress,\n          backgroundColor: [\n            colors.primary.toRGBA(0.9),\n            colors.athensGray.toRGBA(0.8)\n          ]\n        }\n      ],\n      labels: [\"Label 1\", \"Label 2\"]\n    }\n  };\n\n  return progressChart;\n}\n\n\nexport default withTranslation()(IdeaQuestions);\n"]},"metadata":{},"sourceType":"module"}